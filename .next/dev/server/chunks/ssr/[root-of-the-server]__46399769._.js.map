{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,iMAAO,EAAC,IAAA,wKAAI,EAAC;AACtB","debugId":null}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/components/ui/badge.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst badgeVariants = cva(\n  'inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden',\n  {\n    variants: {\n      variant: {\n        default:\n          'border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90',\n        secondary:\n          'border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90',\n        destructive:\n          'border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n    },\n  },\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'span'> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : 'span'\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,kMAAG,EACvB,kZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,mMAAI,GAAG;IAE9B,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,kMAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,mMAAI,GAAG;IAE9B,qBACE,yQAAC;QACC,aAAU;QACV,WAAW,IAAA,6IAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/lib/supabase-client.ts"],"sourcesContent":["// Lightweight in-memory Supabase mock so the app runs with zero external services.\n// Supports the minimal chainable API surface we use in the UI and route handlers.\n\ntype TableName =\n  | 'incidents'\n  | 'police_stations'\n  | 'units'\n  | 'dispatches'\n  | 'checkpoints'\n  | 'unit_stats';\n\n// Seed data for local/offline demo\nconst db: Record<TableName, any[]> = {\n  incidents: [\n    {\n      id: 'robbery-forbes-morewood',\n      name: 'Robbery at Forbes & Morewood',\n      status: 'active',\n      priority: 'high',\n      risk: 'high',\n      lat: 40.4427,\n      lon: -79.9425,\n      containment: 15,\n      description: 'Reported robbery near CMU campus',\n      incident_type: 'robbery',\n      start_time: new Date().toISOString(),\n      last_update: new Date().toISOString(),\n      reported_by: 'Dispatch',\n    },\n    {\n      id: 'traffic-cmu',\n      name: 'Multi-vehicle collision on Fifth Ave',\n      status: 'active',\n      priority: 'medium',\n      risk: 'medium',\n      lat: 40.4433,\n      lon: -79.9490,\n      containment: 35,\n      description: '3-car collision blocking two lanes',\n      incident_type: 'traffic',\n      start_time: new Date().toISOString(),\n      last_update: new Date().toISOString(),\n      reported_by: '911',\n    },\n  ],\n  police_stations: [\n    { id: 1, name: 'Station 1 - Downtown', city: 'Pittsburgh', county: 'Allegheny', lat: 40.4406, lon: -79.9959, created_at: new Date().toISOString() },\n    { id: 2, name: 'Station 2 - North', city: 'Pittsburgh', county: 'Allegheny', lat: 40.4500, lon: -79.9500, created_at: new Date().toISOString() },\n    { id: 3, name: 'Station 3 - South', city: 'Pittsburgh', county: 'Allegheny', lat: 40.4300, lon: -79.9800, created_at: new Date().toISOString() },\n  ],\n  units: [],\n  dispatches: [],\n  checkpoints: [],\n  unit_stats: [],\n};\n\n// Create three units per station\ndb.police_stations.forEach((station) => {\n  Array.from({ length: 3 }).forEach((_, idx) => {\n    db.units.push({\n      id: `${station.id}-unit-${idx + 1}`,\n      station_id: station.id,\n      unit_number: `Unit ${station.id}-${idx + 1}`,\n      unit_type: idx === 2 ? 'k9' : 'patrol',\n      status: 'available',\n      current_lat: station.lat,\n      current_lon: station.lon,\n      incident_id: null,\n      dispatched_at: null,\n      arrived_at: null,\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString(),\n    });\n  });\n});\n\n// Helper to compute unit_stats view on the fly\nconst computeUnitStats = () => {\n  return db.police_stations.map((ps) => {\n    const units = db.units.filter((u) => u.station_id === ps.id);\n    return {\n      station_id: ps.id,\n      station_name: ps.name,\n      available_units: units.filter((u) => u.status === 'available').length,\n      dispatched_units: units.filter((u) => ['dispatched', 'en_route'].includes(u.status)).length,\n      on_scene_units: units.filter((u) => u.status === 'on_scene').length,\n      total_units: units.length,\n    };\n  });\n};\n\n// Utility clone\nconst clone = <T>(v: T): T => JSON.parse(JSON.stringify(v));\n\n// Query builder\nfunction buildSelect(table: TableName, rows: any[]) {\n  let working = [...rows];\n\n  const api: any = {\n    select: (_cols: string = '*') => api,\n    eq: (col: string, val: any) => {\n      working = working.filter((r) => r[col] === val);\n      return api;\n    },\n    in: (col: string, vals: any[]) => {\n      working = working.filter((r) => vals.includes(r[col]));\n      return api;\n    },\n    order: (col: string, opts: { ascending?: boolean } = {}) => {\n      const asc = opts.ascending !== false;\n      working = [...working].sort((a, b) => {\n        if (a[col] === b[col]) return 0;\n        return (a[col] > b[col] ? 1 : -1) * (asc ? 1 : -1);\n      });\n      return api;\n    },\n    limit: (n: number) => {\n      working = working.slice(0, n);\n      return Promise.resolve({ data: clone(working), error: null });\n    },\n    then: (resolve: any, reject: any) =>\n      Promise.resolve({ data: clone(working), error: null }).then(resolve, reject),\n  };\n\n  return api;\n}\n\nfunction buildUpdate(table: TableName, values: Record<string, any>) {\n  return {\n    eq: (col: string, val: any) => {\n      const updated: any[] = [];\n      db[table] = db[table].map((row) => {\n        if (row[col] === val) {\n          const next = { ...row, ...values, updated_at: new Date().toISOString() };\n          updated.push(next);\n          return next;\n        }\n        return row;\n      });\n      return Promise.resolve({ data: clone(updated), error: null });\n    },\n    in: (col: string, vals: any[]) => {\n      const updated: any[] = [];\n      db[table] = db[table].map((row) => {\n        if (vals.includes(row[col])) {\n          const next = { ...row, ...values, updated_at: new Date().toISOString() };\n          updated.push(next);\n          return next;\n        }\n        return row;\n      });\n      return Promise.resolve({ data: clone(updated), error: null });\n    },\n  };\n}\n\nfunction buildInsert(table: TableName, payload: any | any[]) {\n  const items = Array.isArray(payload) ? payload : [payload];\n  const withIds = items.map((item) => ({\n    ...item,\n    id: item.id || crypto.randomUUID?.() || `id-${Math.random().toString(36).slice(2, 8)}`,\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n  }));\n  db[table].push(...withIds);\n  return Promise.resolve({ data: clone(withIds), error: null });\n}\n\nfunction buildDelete(table: TableName) {\n  return {\n    eq: (col: string, val: any) => {\n      const removed = db[table].filter((row) => row[col] === val);\n      db[table] = db[table].filter((row) => row[col] !== val);\n      return Promise.resolve({ data: clone(removed), error: null });\n    },\n  };\n}\n\nconst mockChannel = () => {\n  const ch: any = {\n    on: () => ch,\n    subscribe: () => ch,\n    unsubscribe: () => {},\n  };\n  return ch;\n};\n\nexport const supabase: any = {\n  from: (table: TableName) => {\n    if (table === 'unit_stats') {\n      return buildSelect(table, computeUnitStats());\n    }\n    return {\n      select: (_cols: string = '*') => buildSelect(table, db[table]),\n      update: (values: Record<string, any>) => buildUpdate(table, values),\n      insert: (payload: any | any[]) => buildInsert(table, payload),\n      delete: () => buildDelete(table),\n    };\n  },\n  channel: (_name: string) => mockChannel(),\n  removeChannel: (_ch: any) => {},\n  // Expose db for debugging in dev tools\n  __data: db,\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 376, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/lib/video-mapping.ts"],"sourcesContent":["// Video mapping for fire incidents\nexport interface FireVideo {\n  name: string;\n  videoUrl?: string;\n  thumbnailUrl?: string;\n  description?: string;\n}\n\n// Map fire names to their corresponding video files\nexport const FIRE_VIDEOS: Record<string, FireVideo> = {\n  'Pine Ridge Fire': {\n    name: 'Pine Ridge Fire',\n    videoUrl: '/videos/pine-ridge-fire.mp4',\n    thumbnailUrl: '/videos/pine-ridge-fire-thumb.jpg',\n    description: 'Live footage from Pine Ridge Fire operations'\n  },\n  'Redwood Valley Fire': {\n    name: 'Redwood Valley Fire', \n    videoUrl: '/videos/redwood-valley-fire.mp4',\n    thumbnailUrl: '/videos/redwood-valley-fire-thumb.jpg',\n    description: 'Live footage from Redwood Valley Fire operations'\n  }\n};\n\n// Get video info for a fire by name\nexport function getFireVideo(fireName: string | null): FireVideo | null {\n  console.log('[getFireVideo] Looking for video for fire:', fireName);\n  console.log('[getFireVideo] Available fires:', Object.keys(FIRE_VIDEOS));\n  \n  if (!fireName) {\n    console.log('[getFireVideo] No fire name provided');\n    return null;\n  }\n  \n  // Try exact match first\n  if (FIRE_VIDEOS[fireName]) {\n    console.log('[getFireVideo] Found exact match:', FIRE_VIDEOS[fireName]);\n    return FIRE_VIDEOS[fireName];\n  }\n  \n  // Try partial match for variations in naming\n  const normalizedName = fireName.toLowerCase().trim();\n  console.log('[getFireVideo] Trying partial match with normalized name:', normalizedName);\n  \n  for (const [key, video] of Object.entries(FIRE_VIDEOS)) {\n    if (key.toLowerCase().includes(normalizedName) || normalizedName.includes(key.toLowerCase())) {\n      console.log('[getFireVideo] Found partial match:', key, video);\n      return video;\n    }\n  }\n  \n  console.log('[getFireVideo] No match found for:', fireName);\n  return null;\n}\n\n// Check if video is available\nexport function isVideoAvailable(fireName: string | null): boolean {\n  const video = getFireVideo(fireName);\n  return video?.videoUrl ? true : false;\n}\n"],"names":[],"mappings":"AAAA,mCAAmC;;;;;;;;;AAS5B,MAAM,cAAyC;IACpD,mBAAmB;QACjB,MAAM;QACN,UAAU;QACV,cAAc;QACd,aAAa;IACf;IACA,uBAAuB;QACrB,MAAM;QACN,UAAU;QACV,cAAc;QACd,aAAa;IACf;AACF;AAGO,SAAS,aAAa,QAAuB;IAClD,QAAQ,GAAG,CAAC,8CAA8C;IAC1D,QAAQ,GAAG,CAAC,mCAAmC,OAAO,IAAI,CAAC;IAE3D,IAAI,CAAC,UAAU;QACb,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT;IAEA,wBAAwB;IACxB,IAAI,WAAW,CAAC,SAAS,EAAE;QACzB,QAAQ,GAAG,CAAC,qCAAqC,WAAW,CAAC,SAAS;QACtE,OAAO,WAAW,CAAC,SAAS;IAC9B;IAEA,6CAA6C;IAC7C,MAAM,iBAAiB,SAAS,WAAW,GAAG,IAAI;IAClD,QAAQ,GAAG,CAAC,6DAA6D;IAEzE,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,aAAc;QACtD,IAAI,IAAI,WAAW,GAAG,QAAQ,CAAC,mBAAmB,eAAe,QAAQ,CAAC,IAAI,WAAW,KAAK;YAC5F,QAAQ,GAAG,CAAC,uCAAuC,KAAK;YACxD,OAAO;QACT;IACF;IAEA,QAAQ,GAAG,CAAC,sCAAsC;IAClD,OAAO;AACT;AAGO,SAAS,iBAAiB,QAAuB;IACtD,MAAM,QAAQ,aAAa;IAC3B,OAAO,OAAO,WAAW,OAAO;AAClC","debugId":null}},
    {"offset": {"line": 431, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/components/california-map.tsx"],"sourcesContent":["'use client';\n\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport type { Feature, FeatureCollection } from 'geojson';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { supabase } from '@/lib/supabase-client';\nimport VideoPreview from './VideoPreview';\nimport { getFireVideo } from '@/lib/video-mapping';\n\n// Incident type for navigation callback\ntype Incident = {\n  id: string | number;\n  name: string | null;\n  risk?: 'low' | 'medium' | 'high' | 'critical' | null;\n  lat: number | null;\n  lon: number | null;\n  containment?: number | null;\n  description?: string | null;\n  last_update?: string;\n};\n\n// California coordinates and bounds\nconst CALIFORNIA_BOUNDS = {\n  north: 42.0,\n  south: 32.5,\n  east: -114.0,\n  west: -124.5\n};\n\nconst getMarkerColor = (intensity: string) => {\n  switch (intensity) {\n    case 'critical': return '#FF6B00'; // Fire orange\n    case 'high': return '#FF4444'; // Bright red\n    case 'medium': return '#FF8C00'; // Dark orange\n    case 'low': return '#00C2FF'; // Cyan\n    default: return '#6b7280'; // gray\n  }\n};\n\nconst getMarkerSize = (intensity: string) => {\n  switch (intensity) {\n    case 'critical': return 24;\n    case 'high': return 20;\n    case 'medium': return 16;\n    case 'low': return 12;\n    default: return 14;\n  }\n};\n\nconst getPulseSize = (intensity: string) => {\n  switch (intensity) {\n    case 'critical': return 60;\n    case 'high': return 50;\n    case 'medium': return 40;\n    case 'low': return 30;\n    default: return 35;\n  }\n};\n\nconst METERS_PER_DEGREE_LAT = 111320;\n\n// Supabase incident type\ntype SupabaseIncident = {\n  id: string;\n  name: string | null;\n  status: 'active' | 'contained' | 'extinguished' | null;\n  risk: 'low' | 'medium' | 'high' | 'critical' | null;\n  lat: number | null;\n  lon: number | null;\n  containment: number | null;\n  start_time: string;\n  last_update: string;\n  description: string | null;\n};\n\n// Supabase police station type\ntype SupabasePoliceStation = {\n  id: number;\n  name: string;\n  city: string | null;\n  county: string | null;\n  lat: number;\n  lon: number;\n  created_at: string;\n};\n\n// Keep old name for backward compatibility\ntype SupabaseFirestation = SupabasePoliceStation;\n\n// Convert Supabase incident to map incident format\ntype WildfireIncident = {\n  id: number | string; // Support both number and UUID string\n  name: string;\n  status: string;\n  intensity: string;\n  coordinates: [number, number];\n  acres?: number;\n  description?: string;\n  containment?: number;\n  last_update?: string;\n};\n\ntype FireFeatureProperties = {\n  id: number;\n  intensity: number;\n  name: string;\n};\n\ninterface FireState {\n  baseRadius: number; // meters\n  roughness: number;\n  waveSpeed: number;\n  amplitude: number;\n  expansionRate: number;\n  seed: number;\n  growthVectors: number[]; // Random growth direction for each angle\n  startTime: number; // When this fire started\n  initialWindSpeed: number; // Wind speed when fire was created (locked)\n  initialWindDirection: number; // Wind direction when fire was created (locked)\n  containmentStartTime?: number; // When containment started\n  containmentRate?: number; // How fast fire shrinks (0-1 scale)\n  respondersOnScene?: number; // Number of responders actively containing fire\n  maxRadiusBeforeContainment?: number; // Lock fire size when containment starts\n}\n\n// Unit type (police unit/patrol car)\ntype Unit = {\n  id: string;\n  station_id: number;\n  firestation_id?: number; // Backward compatibility\n  incident_id: string;\n  unit_number?: string;\n  team_number?: number; // Backward compatibility\n  status: 'available' | 'dispatched' | 'en_route' | 'on_scene' | 'returning';\n  current_lat: number;\n  current_lon: number;\n  dispatched_at: string;\n  route?: any; // GeoJSON route\n  progress?: number; // 0-1, position along route\n  marker?: mapboxgl.Marker;\n}\n\n// Keep old name for backward compatibility\ntype Responder = Unit;\n\n// Convert Supabase incident to WildfireIncident format\nconst convertSupabaseIncident = (incident: SupabaseIncident): WildfireIncident => {\n  return {\n    id: incident.id as any, // Keep UUID as string, cast to number type for compatibility\n    name: incident.name || 'Unnamed Fire',\n    status: incident.status || 'active',\n    intensity: incident.risk || 'low',\n    coordinates: [incident.lon || 0, incident.lat || 0],\n    containment: incident.containment || 0,\n    description: incident.description || undefined,\n    last_update: incident.last_update\n  };\n};\n\n// Create popup content HTML\nconst createPopupContent = (incident: WildfireIncident): string => {\n  const videoInfo = getFireVideo(incident.name);\n  const hasVideo = Boolean(videoInfo?.videoUrl);\n  const intensityColor = getMarkerColor(incident.intensity);\n  \n  return `\n    <div class=\"rounded-lg overflow-hidden\" style=\"min-width: 320px;\">\n      <div class=\"px-4 pt-3 pb-2 bg-black/50 border-b border-white/10\">\n        <h3 class=\"text-base font-semibold text-white\">${incident.name}</h3>\n        ${incident.description ? `<p class=\"mt-1\" style=\"font-size: 14px; color: ${intensityColor}; line-height: 1.4; font-weight: 600;\">${incident.description}</p>` : ''}\n      </div>\n      ${hasVideo ? `\n        <div data-video-wrapper=\"true\" class=\"relative\" style=\"width: 100%; height: 140px; background: #000;\">\n          <video \n            data-video-element=\"true\"\n            style=\"width: 100%; height: 100%; object-fit: cover; cursor: pointer;\" \n            poster=\"${videoInfo?.thumbnailUrl || ''}\"\n            preload=\"metadata\" autoplay muted playsinline loop\n            onclick=\"this.paused ? this.play() : this.pause()\"\n          >\n            <source src=\"${videoInfo?.videoUrl}\" type=\"video/mp4\">\n            Your browser does not support the video tag.\n          </video>\n          <!-- Fullscreen removed per request -->\n        </div>\n      ` : `\n        <div class=\"px-4 py-3 bg-black/40 border-b border-white/10\">\n          <p class=\"text-sm font-semibold\" style=\"color: ${intensityColor}\">Livestream Unavailable</p>\n        </div>\n      `}\n      <div class=\"p-4 bg-black/40\">\n        <div class=\"space-y-1 text-sm\">\n          <div class=\"flex justify-between\">\n            <span class=\"text-white/70\">Status:</span>\n            <span class=\"font-semibold text-white\">${incident.status}</span>\n          </div>\n          <div class=\"flex justify-between\">\n            <span class=\"text-white/70\">Intensity:</span>\n            <span class=\"font-semibold\" style=\"color: ${intensityColor}\">${incident.intensity}</span>\n          </div>\n          ${incident.containment !== undefined ? `\n            <div class=\"flex justify-between\">\n              <span class=\"text-white/70\">Containment:</span>\n              <span class=\"font-semibold text-[#00C2FF]\">${incident.containment}%</span>\n            </div>\n          ` : ''}\n        </div>\n      </div>\n    </div>\n  `;\n};\n\n// Create popup content for police station\nconst createPoliceStationPopupContent = (station: SupabasePoliceStation): string => {\n  return createFirestationPopupContent(station);\n}\n\n// Keep old function for backward compatibility\nconst createFirestationPopupContent = (firestation: SupabaseFirestation | SupabasePoliceStation): string => {\n  return `\n    <div class=\"rounded-lg overflow-hidden bg-black/40 p-4\" style=\"min-width: 250px;\">\n      <h3 class=\"text-lg font-bold text-white mb-2\">${firestation.name}</h3>\n      <div class=\"space-y-1 text-sm\">\n        ${firestation.city ? `\n          <div class=\"flex justify-between\">\n            <span class=\"text-white/70\">City:</span>\n            <span class=\"font-semibold text-white\">${firestation.city}</span>\n          </div>\n        ` : ''}\n        ${firestation.county ? `\n          <div class=\"flex justify-between\">\n            <span class=\"text-white/70\">County:</span>\n            <span class=\"font-semibold text-white\">${firestation.county}</span>\n          </div>\n        ` : ''}\n        <div class=\"flex justify-between\">\n          <span class=\"text-white/70\">Type:</span>\n          <span class=\"font-semibold text-[#00C2FF]\">Fire Station</span>\n        </div>\n      </div>\n    </div>\n  `;\n};\n\n// Create firestation marker element with custom SVG icon\nconst createFirestationMarker = () => {\n  const markerEl = document.createElement('div');\n  markerEl.className = 'relative';\n  markerEl.style.cursor = 'pointer';\n  markerEl.style.width = '24px';\n  markerEl.style.height = '24px';\n  markerEl.style.zIndex = '50'; // Lower z-index so fires appear on top\n  \n  // Create a smaller, more subtle firestation icon\n  markerEl.innerHTML = `\n    <div style=\"\n      width: 24px;\n      height: 24px;\n      background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);\n      border: 2px solid #60a5fa;\n      border-radius: 6px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      box-shadow: 0 0 10px rgba(96, 165, 250, 0.6), 0 2px 4px rgba(0, 0, 0, 0.3);\n      transition: transform 0.2s;\n    \" \n    onmouseover=\"this.style.transform='scale(1.3)'\"\n    onmouseout=\"this.style.transform='scale(1)'\">\n      <span style=\"font-size: 14px; line-height: 1;\">ðŸš’</span>\n    </div>\n  `;\n  \n  return markerEl;\n};\n\n// Create animated firetruck marker\nconst createFiretruckMarker = (teamNumber: number) => {\n  const markerEl = document.createElement('div');\n  markerEl.className = 'relative';\n  markerEl.style.width = '32px';\n  markerEl.style.height = '32px';\n  markerEl.style.zIndex = '200'; // Very high z-index so trucks appear on top\n  \n  markerEl.innerHTML = `\n    <div style=\"\n      width: 32px;\n      height: 32px;\n      background: linear-gradient(135deg, #FF6B00 0%, #FF4444 100%);\n      border: 3px solid white;\n      border-radius: 8px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      box-shadow: 0 0 20px rgba(255, 107, 0, 0.8), 0 4px 8px rgba(0, 0, 0, 0.4);\n      animation: pulse-truck 1.5s ease-in-out infinite;\n      position: relative;\n    \">\n      <span style=\"font-size: 18px; line-height: 1; filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5));\">ðŸš’</span>\n    </div>\n    <style>\n      @keyframes pulse-truck {\n        0%, 100% { transform: scale(1); }\n        50% { transform: scale(1.1); }\n      }\n    </style>\n  `;\n  \n  return markerEl;\n};\n\n// Calculate a point along a line at a given progress (0-1)\nconst getPointAlongLine = (coordinates: [number, number][], progress: number): [number, number] => {\n  // Validate input\n  if (!coordinates || coordinates.length === 0) {\n    console.error('[getPointAlongLine] Empty coordinates array');\n    return [0, 0];\n  }\n  \n  if (coordinates.length === 1) {\n    return coordinates[0];\n  }\n  \n  if (progress <= 0) return coordinates[0];\n  if (progress >= 1) return coordinates[coordinates.length - 1];\n  \n  // Calculate total line length\n  let totalLength = 0;\n  const segmentLengths: number[] = [];\n  \n  for (let i = 0; i < coordinates.length - 1; i++) {\n    const coord1 = coordinates[i];\n    const coord2 = coordinates[i + 1];\n    \n    // Validate coordinate pairs\n    if (!coord1 || !coord2 || coord1.length < 2 || coord2.length < 2) {\n      console.error(`[getPointAlongLine] Invalid coordinate pair at index ${i}:`, coord1, coord2);\n      return coordinates[0];\n    }\n    \n    const [lon1, lat1] = coord1;\n    const [lon2, lat2] = coord2;\n    \n    // Validate numeric values\n    if (isNaN(lon1) || isNaN(lat1) || isNaN(lon2) || isNaN(lat2)) {\n      console.error(`[getPointAlongLine] NaN in coordinates at index ${i}:`, [lon1, lat1], [lon2, lat2]);\n      return coordinates[0];\n    }\n    \n    const segmentLength = Math.sqrt(\n      Math.pow(lon2 - lon1, 2) + Math.pow(lat2 - lat1, 2)\n    );\n    \n    if (isNaN(segmentLength) || segmentLength < 0) {\n      console.error(`[getPointAlongLine] Invalid segment length at index ${i}:`, segmentLength);\n      return coordinates[0];\n    }\n    \n    segmentLengths.push(segmentLength);\n    totalLength += segmentLength;\n  }\n  \n  // Handle edge case where all segments are zero length\n  if (totalLength === 0) {\n    return coordinates[0];\n  }\n  \n  // Find target position along line\n  const targetLength = totalLength * progress;\n  let currentLength = 0;\n  \n  for (let i = 0; i < segmentLengths.length; i++) {\n    if (currentLength + segmentLengths[i] >= targetLength) {\n      // Interpolate within this segment\n      const segmentLength = segmentLengths[i];\n      \n      // Avoid division by zero\n      if (segmentLength === 0) {\n        return coordinates[i];\n      }\n      \n      const segmentProgress = (targetLength - currentLength) / segmentLength;\n      const [lon1, lat1] = coordinates[i];\n      const [lon2, lat2] = coordinates[i + 1];\n      \n      const resultLon = lon1 + (lon2 - lon1) * segmentProgress;\n      const resultLat = lat1 + (lat2 - lat1) * segmentProgress;\n      \n      // Final validation\n      if (isNaN(resultLon) || isNaN(resultLat)) {\n        console.error('[getPointAlongLine] Calculated NaN position:', {\n          lon1, lat1, lon2, lat2, segmentProgress\n        });\n        return coordinates[i];\n      }\n      \n      return [resultLon, resultLat];\n    }\n    currentLength += segmentLengths[i];\n  }\n  \n  return coordinates[coordinates.length - 1];\n};\n\nconst clamp = (value: number, min: number, max: number) => Math.min(Math.max(value, min), max);\n\n// Calculate distance between two points using Haversine formula (in kilometers)\nconst calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number): number => {\n  const R = 6371; // Earth's radius in km\n  const dLat = (lat2 - lat1) * Math.PI / 180;\n  const dLon = (lon2 - lon1) * Math.PI / 180;\n  const a = \n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n    Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n};\n\n// Find nearest fire station to a given location\nconst findNearestFirestation = (\n  lat: number, \n  lon: number, \n  firestations: SupabaseFirestation[]\n): SupabaseFirestation | null => {\n  if (firestations.length === 0) return null;\n  \n  let nearest = firestations[0];\n  let minDistance = calculateDistance(lat, lon, nearest.lat, nearest.lon);\n  \n  for (let i = 1; i < firestations.length; i++) {\n    const distance = calculateDistance(lat, lon, firestations[i].lat, firestations[i].lon);\n    if (distance < minDistance) {\n      minDistance = distance;\n      nearest = firestations[i];\n    }\n  }\n  \n  return nearest;\n};\n\nconst getIntensityMultiplier = (intensity: string) => {\n  switch (intensity) {\n    case 'critical': return 1.25;\n    case 'high': return 1.1;\n    case 'medium': return 0.9;\n    case 'low':\n    default:\n      return 0.75;\n  }\n};\n\nconst getBaseRadiusMeters = (incident: WildfireIncident) => {\n  const acres = incident.acres ?? 500;\n  const intensityMultiplier = getIntensityMultiplier(incident.intensity);\n  const base = 150 + Math.sqrt(acres) * 2.5;\n  return base * intensityMultiplier;\n};\n\nconst getExpansionRate = (incident: WildfireIncident) => {\n  const intensityMultiplier = getIntensityMultiplier(incident.intensity);\n  return 18 * intensityMultiplier;\n};\n\n/**\n * Generate wind-influenced growth vectors\n * Wind direction is where wind comes FROM (meteorological convention)\n * Fire spreads in the OPPOSITE direction (downwind)\n * \n * @param numVectors - Number of directional segments\n * @param windSpeed - Wind speed in mph (higher = more directional bias)\n * @param windDirection - Wind direction in degrees (0=N, 90=E, 180=S, 270=W)\n * @returns Array of growth multipliers for each direction\n */\nconst generateWindInfluencedGrowthVectors = (\n  numVectors: number,\n  windSpeed: number,\n  windDirection: number\n): number[] => {\n  const growthVectors: number[] = [];\n  \n  // Convert wind direction to radians\n  // Fire spreads OPPOSITE to wind direction (add 180Â°)\n  const fireSpreadDirection = ((windDirection + 180) % 360) * (Math.PI / 180);\n  \n  // Wind influence factor (0-1): stronger winds = more directional spread\n  // 0 mph = no influence, 20+ mph = maximum influence\n  const windInfluence = Math.min(windSpeed / 20, 1);\n  \n  for (let i = 0; i < numVectors; i++) {\n    const angle = (i / numVectors) * Math.PI * 2;\n    \n    // Calculate how aligned this angle is with fire spread direction\n    // cos gives 1 when aligned, -1 when opposite\n    const alignment = Math.cos(angle - fireSpreadDirection);\n    \n    // Convert alignment to growth multiplier\n    // Downwind direction (aligned): higher growth\n    // Upwind direction (opposite): lower growth\n    // Perpendicular: neutral growth\n    const windEffect = 0.5 + (alignment * windInfluence * 0.7);\n    \n    // Add some random variation for organic spread\n    const randomVariation = 0.85 + Math.random() * 0.3;\n    \n    // Combine wind effect with random variation\n    const growthMultiplier = windEffect * randomVariation;\n    \n    growthVectors.push(growthMultiplier);\n  }\n  \n  return growthVectors;\n};\n\n/**\n * REALISTIC WIND-DRIVEN FIRE SPREAD SIMULATION\n * \n * This system creates organic, realistic fire spread patterns using:\n * 1. Real-time wind data (speed & direction from weather API)\n * 2. Wind-influenced directional growth (fires spread downwind)\n * 3. Multi-octave noise for irregular, natural edges\n * 4. Emergence from center (starts small, grows outward)\n * 5. Subtle edge movement for dynamic appearance\n * 6. Non-uniform expansion based on wind conditions\n * \n * Wind behavior:\n * - Stronger winds (>15 mph) create more directional spread\n * - Fire spreads opposite to wind direction (downwind)\n * - Perpendicular directions have neutral growth\n * - Upwind direction has reduced spread\n */\n\n// Simple noise function for organic fire spread\nconst noise = (x: number, y: number, seed: number): number => {\n  const n = Math.sin(x * 12.9898 + y * 78.233 + seed) * 43758.5453;\n  return n - Math.floor(n);\n};\n\n// Multi-octave noise for more organic patterns\nconst multiNoise = (x: number, y: number, seed: number, octaves: number = 3): number => {\n  let value = 0;\n  let amplitude = 1;\n  let frequency = 1;\n  let maxValue = 0;\n\n  for (let i = 0; i < octaves; i++) {\n    value += noise(x * frequency, y * frequency, seed + i) * amplitude;\n    maxValue += amplitude;\n    amplitude *= 0.5;\n    frequency *= 2;\n  }\n\n  return value / maxValue;\n};\n\nconst generateFirePolygonCoordinates = (\n  center: [number, number],\n  radiusMeters: number,\n  options: { \n    roughness?: number; \n    points?: number; \n    time?: number; \n    seed?: number;\n    growthVectors?: number[];\n    elapsedTime?: number;\n  } = {}\n) => {\n  const { \n    roughness = 0.4, \n    points = 64, \n    time = 0, \n    seed = 0,\n    growthVectors = [],\n    elapsedTime = 0\n  } = options;\n  \n  const coords: [number, number][] = [];\n  const latRadians = (center[1] * Math.PI) / 180;\n  const cosLat = Math.cos(latRadians);\n\n  // Calculate emergence factor (fire starts small and grows)\n  // Goes from 0 to 1 over first 8 seconds for slow visible emergence, then stays at 1\n  const emergenceFactor = Math.min(elapsedTime / 8, 1);\n  \n  for (let i = 0; i < points; i++) {\n    const angle = (i / points) * Math.PI * 2;\n    \n    // Get growth vector for this angle (or generate a random one)\n    const vectorIndex = Math.floor((i / points) * growthVectors.length);\n    const growthVector = growthVectors[vectorIndex] || 1.0;\n    \n    // Use static noise (not time-dependent) for stable organic edges\n    // Only use angle for variation, not time\n    const noiseValue = multiNoise(\n      Math.cos(angle) * 2,\n      Math.sin(angle) * 2,\n      seed,\n      3 // 3 octaves for smoother shapes\n    );\n    \n    // Very subtle, slow edge movement (not flicker)\n    const subtleMovement = 1 + Math.sin(angle * 5 + time * 0.5 + seed) * 0.02;\n    \n    // Combine all factors for realistic but stable fire spread\n    // - Base radius grows with time\n    // - Growth vectors create asymmetric spread (wind, terrain)\n    // - Noise creates organic, irregular edges (STABLE)\n    // - Subtle movement adds very slow dynamic changes\n    // - Emergence factor makes it start from center\n    const irregularity = 0.8 + (noiseValue * roughness * 0.8);\n    const effectiveRadius = radiusMeters * \n      emergenceFactor *    // Emerge from center\n      growthVector *       // Directional growth\n      irregularity *       // Organic variation (stable)\n      subtleMovement;      // Very subtle slow movement\n\n    const dx = Math.cos(angle) * effectiveRadius;\n    const dy = Math.sin(angle) * effectiveRadius;\n\n    const lngOffset = dx / (METERS_PER_DEGREE_LAT * cosLat);\n    const latOffset = dy / METERS_PER_DEGREE_LAT;\n\n    coords.push([center[0] + lngOffset, center[1] + latOffset]);\n  }\n\n  if (coords.length) {\n    coords.push(coords[0]);\n  }\n\n  return coords;\n};\n\nconst createFireFeature = (\n  incident: WildfireIncident,\n  radiusMeters: number,\n  options: { \n    time?: number; \n    roughness?: number; \n    seed?: number; \n    intensity?: number; \n    points?: number;\n    growthVectors?: number[];\n    elapsedTime?: number;\n  } = {}\n): Feature<GeoJSON.Polygon, FireFeatureProperties> => {\n  const { \n    time = 0, \n    roughness = 0.4, \n    seed = 0, \n    intensity = 0.6, \n    points = 64,\n    growthVectors = [],\n    elapsedTime = 0\n  } = options;\n\n  return {\n    type: 'Feature',\n    properties: {\n      id: typeof incident.id === 'number' ? incident.id : parseInt(String(incident.id), 10),\n      intensity,\n      name: incident.name\n    },\n    geometry: {\n      type: 'Polygon',\n      coordinates: [generateFirePolygonCoordinates(\n        incident.coordinates as [number, number], \n        radiusMeters, \n        { roughness, time, seed, points, growthVectors, elapsedTime }\n      )]\n    }\n  };\n};\n\ninterface CaliforniaMapProps {\n  className?: string;\n  onMapReady?: (navigateToIncident: (incident: Incident) => void) => void;\n  onMapMove?: (center: { lat: number; lon: number }) => void;\n  windSpeed?: number;      // Wind speed in mph\n  windDirection?: number;  // Wind direction in degrees (meteorological: where wind comes FROM)\n  onIncidentSelect?: (incident: Incident) => void;\n  onUnitUpdate?: (units: { available: number; dispatched: number; active: number }, activeUnits?: any[]) => void;\n  refreshUnitTrigger?: number; // Trigger to refresh unit data\n  selectedIncidentId?: string | null; // Currently selected incident ID\n  // Backward compatibility\n  onResponderUpdate?: (responders: { available: number; dispatched: number; active: number }, activeResponders?: any[]) => void;\n  refreshResponderTrigger?: number;\n}\n\nexport default function CaliforniaMap({ className = '', onMapReady, onMapMove, windSpeed = 10, windDirection = 270, onIncidentSelect, onUnitUpdate, refreshUnitTrigger, selectedIncidentId, onResponderUpdate, refreshResponderTrigger }: CaliforniaMapProps) {\n  // Support both new and old prop names\n  const unitUpdateCallback = onUnitUpdate || onResponderUpdate;\n  const refreshTrigger = refreshUnitTrigger || refreshResponderTrigger;\n  const mapContainerRef = useRef<HTMLDivElement>(null);\n  const mapRef = useRef<mapboxgl.Map | null>(null);\n  const markersRef = useRef<mapboxgl.Marker[]>([]);\n  const popupRef = useRef<mapboxgl.Popup | null>(null);\n  const fireStateRef = useRef<Record<number, FireState>>({});\n  const fireAnimationRef = useRef<number | null>(null);\n  const fireStartTimeRef = useRef<number | null>(null);\n  \n  // State for Supabase incidents\n  const [incidents, setIncidents] = useState<WildfireIncident[]>([]);\n  const [firestations, setFirestations] = useState<SupabaseFirestation[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [aiRecommendedRoutes, setAiRecommendedRoutes] = useState<any[]>([]);\n  const [evacuationZones, setEvacuationZones] = useState<any[]>([]);\n  const [selectedFireId, setSelectedFireId] = useState<number | null>(null);\n  const [responders, setResponders] = useState<Responder[]>([]);\n  const latestRespondersRef = useRef<Responder[]>([]); // Tracks latest responders state for fire animation\n  const responderAnimationRef = useRef<number | null>(null);\n  \n  const activeIncidents = incidents.filter((incident) => incident.status === 'active');\n  const fireSourceId = 'fire-zones';\n  const fireLayerId = 'fire-heat';\n  const routeSourceId = 'route-source';\n  const routeLayerId = 'route-layer';\n  const routeArrowLayerId = 'route-arrows';\n  const aiRouteSourceId = 'ai-route-source';\n  const aiRouteLayerId = 'ai-route-layer';\n  const evacuationSourceId = 'evacuation-source';\n  const evacuationLayerId = 'evacuation-layer';\n\n  // Function to fetch and display route from fire station to fire\n  const displayRouteToFire = useCallback(async (\n    fireLat: number,\n    fireLon: number,\n    stationLat: number,\n    stationLon: number\n  ) => {\n    if (!mapRef.current) return;\n\n    try {\n      // Fetch route from Mapbox Directions API\n      const url = `https://api.mapbox.com/directions/v5/mapbox/driving/${stationLon},${stationLat};${fireLon},${fireLat}?geometries=geojson&access_token=${mapboxgl.accessToken}`;\n      \n      const response = await fetch(url);\n      const data = await response.json();\n\n      if (data.routes && data.routes.length > 0) {\n        const route = data.routes[0].geometry;\n\n        // Remove existing route if any\n        const map = mapRef.current;\n        if (map.getLayer(routeArrowLayerId)) {\n          map.removeLayer(routeArrowLayerId);\n        }\n        if (map.getLayer(routeLayerId)) {\n          map.removeLayer(routeLayerId);\n        }\n        if (map.getSource(routeSourceId)) {\n          map.removeSource(routeSourceId);\n        }\n\n        // Add the route as a source\n        map.addSource(routeSourceId, {\n          type: 'geojson',\n          data: {\n            type: 'Feature',\n            properties: {},\n            geometry: route\n          }\n        });\n\n        // Add the route layer\n        map.addLayer({\n          id: routeLayerId,\n          type: 'line',\n          source: routeSourceId,\n          layout: {\n            'line-join': 'round',\n            'line-cap': 'round'\n          },\n          paint: {\n            'line-color': '#3b82f6', // Blue color for route\n            'line-width': 6,\n            'line-opacity': 0.8\n          }\n        });\n\n        // Add animated arrow layer to show direction\n        map.addLayer({\n          id: routeArrowLayerId,\n          type: 'line',\n          source: routeSourceId,\n          layout: {\n            'line-join': 'round',\n            'line-cap': 'round'\n          },\n          paint: {\n            'line-color': '#60a5fa', // Lighter blue for arrows\n            'line-width': 3,\n            'line-opacity': 0.6,\n            'line-dasharray': [0, 2, 2]\n          }\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching route:', error);\n    }\n  }, []);\n\n  // Define navigation function for incident selection\n  const navigateToIncident = useCallback((incident: Incident) => {\n    if (!mapRef.current) return;\n    \n    const lat = incident.lat;\n    const lon = incident.lon;\n    \n    if (!lat || !lon || isNaN(lat) || isNaN(lon)) {\n      console.warn('Invalid incident coordinates:', { lat, lon, incident });\n      return;\n    }\n\n    // Set selected fire ID\n    const fireId = typeof incident.id === 'string' ? parseInt(incident.id) : incident.id;\n    setSelectedFireId(fireId);\n\n    // Notify parent component that this incident was selected\n    if (onIncidentSelect) {\n      onIncidentSelect(incident);\n    }\n    \n    // Find nearest fire station and display route (for active incidents)\n    const nearestStation = findNearestFirestation(lat, lon, firestations);\n    if (nearestStation) {\n      displayRouteToFire(lat, lon, nearestStation.lat, nearestStation.lon);\n    }\n\n    // First, remove any existing popup\n    if (popupRef.current) {\n      popupRef.current.remove();\n      popupRef.current = null;\n    }\n\n    // Convert Incident to WildfireIncident for popup content\n    const wildfireIncident: WildfireIncident = {\n      id: typeof incident.id === 'string' ? parseInt(incident.id) : incident.id,\n      name: incident.name || 'Unnamed Fire',\n      status: 'active',\n      intensity: incident.risk || 'low',\n      coordinates: [lon, lat],\n      containment: incident.containment || undefined,\n      description: incident.description || undefined\n    };\n\n    // Create the popup immediately so sidebar clicks show content without delay\n    try {\n      const popupContent = createPopupContent(wildfireIncident);\n\n      const isPalace = (wildfireIncident.name || '').toLowerCase().includes('palace of fine arts');\n      const sidebarOffset = isPalace ? 56 : 28; // push lower to avoid header overlap for Palace\n\n      popupRef.current = new mapboxgl.Popup({ \n        closeButton: true, \n        closeOnClick: true,\n        maxWidth: '380px',\n        offset: sidebarOffset,\n        anchor: 'bottom'\n      })\n        .setLngLat([lon, lat])\n        .setHTML(popupContent)\n        .addTo(mapRef.current);\n\n      // Wire up fullscreen behavior\n      try {\n        const popupNode = popupRef.current?.getElement();\n        if (popupNode) {\n          const content = popupNode.querySelector('.mapboxgl-popup-content') as HTMLElement | null;\n          const videoEl = content?.querySelector('video[data-video-element=\"true\"]') as HTMLVideoElement | null;\n          // Toggle play/pause when clicking anywhere inside popup when video exists\n          if (videoEl && content) {\n            content.onclick = (e: MouseEvent) => {\n              const target = e.target as HTMLElement;\n              // Ignore clicks on the fullscreen button itself\n              if (target.closest('button[data-fullscreen-toggle=\"true\"]')) return;\n              if (videoEl.paused) videoEl.play(); else videoEl.pause();\n            };\n          }\n          // Remove fullscreen behavior entirely\n        }\n      } catch {}\n    } catch (error) {\n      console.error('Error creating popup:', error);\n    }\n\n    // Then fly to the incident location (popup will reposition automatically)\n    mapRef.current.flyTo({\n      center: [lon, lat],\n      zoom: 17,\n      pitch: 60,\n      bearing: mapRef.current.getBearing(),\n      duration: 3500,\n      padding: { top: 260, bottom: 40, left: 40, right: 40 },\n      essential: true\n    });\n  }, [onIncidentSelect, firestations, displayRouteToFire]);\n\n  // Fetch incidents and firestations from Supabase\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch incidents\n        const { data: incidentsData, error: incidentsError } = await supabase\n          .from('incidents')\n          .select('*')\n          .order('last_update', { ascending: false });\n\n        if (incidentsError) {\n          setError(incidentsError.message);\n          return;\n        }\n\n        // Fetch police stations (try police_stations first, fallback to firestations for backward compatibility)\n        const { data: policeStationsData, error: policeStationsError } = await supabase\n          .from('police_stations')\n          .select('*')\n          .order('id');\n        \n        // Fallback to firestations if police_stations doesn't exist\n        let firestationsData = policeStationsData;\n        let firestationsError = policeStationsError;\n        if (policeStationsError && policeStationsError.code === 'PGRST116') {\n          const { data: fallbackData, error: fallbackError } = await supabase\n            .from('firestations')\n            .select('*')\n            .order('id');\n          firestationsData = fallbackData;\n          firestationsError = fallbackError;\n        }\n\n        if (firestationsError) {\n          console.error('Error fetching police stations:', firestationsError);\n        }\n\n        const convertedIncidents = (incidentsData || []).map(convertSupabaseIncident);\n        setIncidents(convertedIncidents);\n        setFirestations(firestationsData || []);\n        setLoading(false);\n      } catch (err) {\n        setError('Failed to fetch data');\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n\n    // Set up real-time updates\n    const channel = supabase\n      .channel('incidents-rt')\n      .on('postgres_changes',\n        { event: '*', schema: 'public', table: 'incidents' },\n        (payload) => {\n          const newIncident = payload.new as SupabaseIncident;\n          const convertedIncident = convertSupabaseIncident(newIncident);\n          \n          setIncidents(prev => {\n            const without = prev.filter(i => i.id !== convertedIncident.id);\n            return [convertedIncident, ...without];\n          });\n        })\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, []);\n\n  // Poll for AI-recommended routes and evacuations\n  useEffect(() => {\n    const pollRoutes = async () => {\n      try {\n        const response = await fetch('/api/update-routes');\n        if (!response.ok) {\n          console.warn('Failed to fetch AI routes:', response.statusText);\n          return;\n        }\n        \n        const data = await response.json();\n        setAiRecommendedRoutes(data.routes || []);\n        setEvacuationZones(data.evacuations || []);\n        \n        if (data.routes && data.routes.length > 0) {\n          console.log(`[AI Agent] Received ${data.routes.length} route updates`);\n        }\n      } catch (error) {\n        console.error('Error polling AI routes:', error);\n      }\n    };\n    \n    // Initial poll\n    pollRoutes();\n    \n    // Poll every 30 seconds\n    const interval = setInterval(pollRoutes, 30000);\n    \n    return () => clearInterval(interval);\n  }, []);\n\n  // Poll for active units and update their positions\n  useEffect(() => {\n    const pollUnits = async () => {\n      try {\n        const response = await fetch('/api/dispatch-unit');\n        if (!response.ok) return;\n        \n        const data = await response.json();\n        \n        // Update unit stats - pass active units so parent can filter by incident\n        if (unitUpdateCallback && data.totals) {\n          unitUpdateCallback(\n            {\n              available: data.totals.available || 0,\n              dispatched: data.totals.dispatched || 0,\n              active: data.totals.on_scene || data.totals.active || 0\n            },\n            data.activeUnits || data.activeResponders || []\n          );\n        }\n        \n        // Update active units state (support both activeUnits and activeResponders for backward compatibility)\n        const activeUnitsData = data.activeUnits || data.activeResponders || [];\n        if (activeUnitsData.length > 0) {\n          const newUnits = activeUnitsData.map((dbUnit: any) => ({\n            id: dbUnit.id,\n            station_id: dbUnit.station_id || dbUnit.firestation_id,\n            firestation_id: dbUnit.firestation_id || dbUnit.station_id, // Backward compatibility\n            incident_id: dbUnit.incident_id,\n            unit_number: dbUnit.unit_number,\n            team_number: dbUnit.team_number || parseInt(dbUnit.unit_number?.match(/\\d+/)?.[0] || '1'), // Extract number from unit_number\n            status: dbUnit.status,\n            current_lat: dbUnit.current_lat,\n            current_lon: dbUnit.current_lon,\n            dispatched_at: dbUnit.dispatched_at,\n            progress: 0\n          }));\n          setResponders(newUnits as Responder[]);\n          latestRespondersRef.current = newUnits as Responder[];\n        } else {\n          setResponders([]);\n          latestRespondersRef.current = [];\n        }\n      } catch (error) {\n        console.error('Error polling units:', error);\n      }\n    };\n    \n    // Initial poll\n    pollUnits();\n    \n    // Poll every 5 seconds for active units\n    const interval = setInterval(pollUnits, 5000);\n    \n    return () => clearInterval(interval);\n  }, [refreshTrigger, unitUpdateCallback]);\n\n  // Animate responders moving along routes\n  useEffect(() => {\n    if (!mapRef.current) return;\n    \n    const map = mapRef.current;\n    \n    if (responders.length === 0) {\n      console.log('[Responder Animation] No responders to animate');\n      return;\n    }\n    \n    console.log('[Responder Animation] Starting animation for', responders.length, 'responders');\n\n    let animationFrameId: number;\n    const respondersRef: Responder[] = responders.map(r => ({...r})); // Copy to avoid state mutation\n\n    const animateResponders = async () => {\n      for (const responder of respondersRef) {\n        // Check if this responder's incident is selected\n        const isIncidentSelected = selectedIncidentId && String(responder.incident_id) === String(selectedIncidentId);\n        \n        // If responder doesn't have a marker yet, create one\n        if (!responder.marker) {\n          console.log(`[Marker] Creating marker for Team ${responder.team_number} at [${responder.current_lon}, ${responder.current_lat}]`);\n          const markerEl = createFiretruckMarker(responder.team_number);\n          const marker = new mapboxgl.Marker({ element: markerEl, anchor: 'center' })\n            .setLngLat([responder.current_lon, responder.current_lat])\n            .addTo(map);\n          \n          // Hide by default (only show when incident is selected)\n          markerEl.style.display = isIncidentSelected ? 'block' : 'none';\n          \n          responder.marker = marker;\n        } else {\n          // Update visibility based on selection\n          const markerEl = responder.marker.getElement();\n          if (markerEl) {\n            markerEl.style.display = isIncidentSelected ? 'block' : 'none';\n          }\n        }\n\n        // If responder doesn't have a route yet and is dispatched, fetch it\n        if (!responder.route && (responder.status === 'dispatched' || responder.status === 'en_route')) {\n          const incident = incidents.find(i => String(i.id) === String(responder.incident_id));\n          console.log(`[Route] Team ${responder.team_number} - Looking for incident ${responder.incident_id}, found:`, !!incident);\n          \n          if (incident) {\n            try {\n              const mapboxToken = 'pk.eyJ1Ijoic3BhbnVnYW50aTMxIiwiYSI6ImNtaDVwbzBlYzA1bTkybnB6azQxZnEwOGEifQ.eCNufvFartJqVo8Nwkwkeg';\n              const [fireLon, fireLat] = incident.coordinates;\n              // Validate responder position\n              if (isNaN(responder.current_lon) || isNaN(responder.current_lat)) {\n                console.error(`[Route] âŒ Invalid responder position for Team ${responder.team_number}:`, {\n                  lat: responder.current_lat,\n                  lon: responder.current_lon\n                });\n                continue;\n              }\n              \n              // Validate fire position\n              if (isNaN(fireLon) || isNaN(fireLat)) {\n                console.error(`[Route] âŒ Invalid fire position for incident ${responder.incident_id}:`, {\n                  lat: fireLat,\n                  lon: fireLon\n                });\n                continue;\n              }\n              \n              const routeUrl = `https://api.mapbox.com/directions/v5/mapbox/driving/${responder.current_lon},${responder.current_lat};${fireLon},${fireLat}?geometries=geojson&access_token=${mapboxToken}`;\n              \n              console.log(`[Route] Fetching route for Team ${responder.team_number} from [${responder.current_lon}, ${responder.current_lat}] to [${fireLon}, ${fireLat}]`);\n              const response = await fetch(routeUrl);\n              const data = await response.json();\n              \n              // Check for Mapbox API errors\n              if (data.code && data.code !== 'Ok') {\n                console.error(`[Route] âŒ Mapbox API error for Team ${responder.team_number}:`, data);\n                continue;\n              }\n              \n              if (data.routes && data.routes.length > 0) {\n                const geometry = data.routes[0].geometry;\n                \n                // Validate geometry structure\n                if (!geometry || !geometry.coordinates || !Array.isArray(geometry.coordinates) || geometry.coordinates.length === 0) {\n                  console.error(`[Route] âŒ Invalid route geometry for Team ${responder.team_number}:`, geometry);\n                  continue;\n                }\n                \n                // Validate first few coordinates to ensure they're valid numbers\n                const coords = geometry.coordinates;\n                let hasInvalidCoords = false;\n                for (let i = 0; i < Math.min(3, coords.length); i++) {\n                  const coord = coords[i];\n                  if (!coord || !Array.isArray(coord) || coord.length < 2 || \n                      isNaN(coord[0]) || isNaN(coord[1])) {\n                    console.error(`[Route] âŒ Invalid coordinate at index ${i} for Team ${responder.team_number}:`, coord);\n                    hasInvalidCoords = true;\n                    break;\n                  }\n                }\n                \n                if (hasInvalidCoords) {\n                  console.error(`[Route] âŒ Skipping invalid route for Team ${responder.team_number}`);\n                  continue;\n                }\n                \n                responder.route = geometry;\n                responder.progress = 0;\n                console.log(`[Route] âœ… Route fetched for Team ${responder.team_number}, ${responder.route.coordinates.length} points, duration: ${Math.round(data.routes[0].duration / 60)} min`);\n                \n                // Add route to map as blue line (only if map style is loaded)\n                if (map && map.isStyleLoaded && map.isStyleLoaded()) {\n                  try {\n                    const routeSourceId = `responder-route-${responder.id}`;\n                    const routeLayerId = `responder-route-layer-${responder.id}`;\n                    \n                    // Remove existing route if any\n                    if (map.getLayer && map.getLayer(routeLayerId)) {\n                      map.removeLayer(routeLayerId);\n                    }\n                    if (map.getSource && map.getSource(routeSourceId)) {\n                      map.removeSource(routeSourceId);\n                    }\n                    \n                    // Add route source and layer\n                    if (map.addSource && map.addLayer) {\n                      map.addSource(routeSourceId, {\n                        type: 'geojson',\n                        data: {\n                          type: 'Feature',\n                          properties: {},\n                          geometry: responder.route\n                        }\n                      });\n                      \n                      map.addLayer({\n                        id: routeLayerId,\n                        type: 'line',\n                        source: routeSourceId,\n                        layout: {\n                          'line-join': 'round',\n                          'line-cap': 'round'\n                        },\n                        paint: {\n                          'line-color': '#3b82f6', // Blue color for route\n                          'line-width': 4,\n                          'line-opacity': 0.8\n                        }\n                      });\n                    }\n                  } catch (error) {\n                    console.error(`[Route] Error adding route to map:`, error);\n                  }\n                }\n                \n                // Update status to en_route if not already\n                if (responder.status === 'dispatched') {\n                  // Try units table first, fallback to responders for backward compatibility\n                  const updateTable = async () => {\n                    try {\n                      await supabase.from('units').update({ status: 'en_route' }).eq('id', responder.id);\n                    } catch {\n                      await supabase.from('responders').update({ status: 'en_route' }).eq('id', responder.id);\n                    }\n                  };\n                  await updateTable();\n                  responder.status = 'en_route';\n                  console.log(`[Route] Updated Team ${responder.team_number} status to en_route`);\n                }\n              } else {\n                console.error(`[Route] âŒ No routes found in response for Team ${responder.team_number}`);\n              }\n            } catch (error) {\n              console.error(`[Route] âŒ Error fetching route for Team ${responder.team_number}:`, error);\n            }\n          } else {\n            console.warn(`[Route] âš ï¸ Could not find incident ${responder.incident_id} for Team ${responder.team_number}`);\n          }\n        }\n\n        // Animate responder along route\n        if (responder.route && (responder.status === 'en_route' || responder.status === 'dispatched') && responder.progress !== undefined) {\n          // Move at a steady pace (complete route in 10 seconds)\n          responder.progress = Math.min(responder.progress + (1 / (10 * 60)), 1); // 60fps, 10 seconds total\n\n          // Validate route structure\n          if (!responder.route || typeof responder.route !== 'object') {\n            console.error(`[Animation] Invalid route object for Team ${responder.team_number}:`, responder.route);\n            continue;\n          }\n\n          const coordinates = responder.route.coordinates;\n          if (!coordinates || !Array.isArray(coordinates) || coordinates.length === 0) {\n            console.error(`[Animation] Invalid route coordinates for Team ${responder.team_number}:`, {\n              hasCoordinates: !!coordinates,\n              isArray: Array.isArray(coordinates),\n              length: coordinates?.length,\n              route: responder.route\n            });\n            continue;\n          }\n\n          // Validate first coordinate\n          if (!coordinates[0] || !Array.isArray(coordinates[0]) || coordinates[0].length < 2) {\n            console.error(`[Animation] Invalid coordinate format for Team ${responder.team_number}:`, coordinates[0]);\n            continue;\n          }\n\n          const currentPos = getPointAlongLine(coordinates, responder.progress);\n          \n          // Validate calculated position\n          if (!currentPos || !Array.isArray(currentPos) || isNaN(currentPos[0]) || isNaN(currentPos[1])) {\n            console.error(`[Animation] Invalid calculated position for Team ${responder.team_number}:`, {\n              currentPos,\n              progress: responder.progress,\n              coordCount: coordinates.length,\n              firstCoord: coordinates[0],\n              lastCoord: coordinates[coordinates.length - 1]\n            });\n            continue;\n          }\n\n          // Update marker position\n          if (responder.marker) {\n            responder.marker.setLngLat(currentPos);\n            \n            // Log less frequently - only every 10%\n            if (Math.abs((responder.progress * 100) % 10) < 2) {\n              console.log(`[Animation] Team ${responder.team_number} at ${Math.round(responder.progress * 100)}% progress`);\n            }\n          }\n\n          // CHECK FOR FIRE COLLISION WHILE MOVING\n          const incident = incidents.find(i => String(i.id) === String(responder.incident_id));\n          if (incident && responder.status === 'en_route') {\n            const [fireLon, fireLat] = incident.coordinates;\n            const [truckLon, truckLat] = currentPos;\n            \n            // Get fire state to calculate ACTUAL current fire radius\n            const incidentKey = typeof incident.id === 'number' ? incident.id : parseInt(String(incident.id), 10);\n            const fireState = fireStateRef.current[incidentKey];\n            if (fireState) {\n              // Calculate the current radius multiplier (same logic as in animateFire)\n              const now = Date.now();\n              const elapsedSeconds = (now - (fireState.startTime || now)) / 1000;\n              \n              // Check if other responders are already on scene\n              const othersOnScene = latestRespondersRef.current.filter(\n                r => String(r.incident_id) === String(incident.id) && r.status === 'on_scene' && r.id !== responder.id\n              ).length;\n              \n              let currentRadiusMultiplier = 1.0;\n              if (othersOnScene > 0 && fireState.containmentStartTime) {\n                // Fire is already being contained\n                const containmentSeconds = (now - fireState.containmentStartTime) / 1000;\n                const shrinkProgress = Math.min(containmentSeconds / (20 / othersOnScene), 1);\n                currentRadiusMultiplier = 1 - (shrinkProgress * 0.95);\n              } else {\n                // Fire is still growing\n                const growthProgress = Math.min(elapsedSeconds / 240, 1);\n                const easedGrowth = 1 - Math.pow(1 - growthProgress, 1.8);\n                const pulse = Math.sin(elapsedSeconds * fireState.waveSpeed + fireState.seed) * 0.01;\n                currentRadiusMultiplier = 0.02 + (easedGrowth * 0.98) + pulse;\n              }\n              \n              const currentRadius = fireState.baseRadius * currentRadiusMultiplier;\n              \n              // Calculate distance from truck to fire center\n              const distanceKm = calculateDistance(truckLat, truckLon, fireLat, fireLon);\n              const distanceMeters = distanceKm * 1000;\n              \n              // If truck touches fire edge, STOP and mark as on_scene immediately!\n              if (distanceMeters <= currentRadius + 50) {\n                responder.status = 'on_scene';\n                responder.progress = 1; // Stop movement\n                \n                // Try units table first, fallback to responders for backward compatibility\n                const updateOnScene = async () => {\n                  try {\n                    await supabase.from('units').update({\n                      status: 'on_scene',\n                      arrived_at: new Date().toISOString(),\n                      current_lat: truckLat,\n                      current_lon: truckLon\n                    }).eq('id', responder.id);\n                  } catch {\n                    await supabase.from('responders').update({\n                      status: 'on_scene',\n                      arrived_at: new Date().toISOString(),\n                      current_lat: truckLat,\n                      current_lon: truckLon\n                    }).eq('id', responder.id);\n                  }\n                };\n                await updateOnScene();\n                \n                // CRITICAL: Update React state AND ref immediately\n                setResponders(prev => {\n                  const updated = prev.map(r => \n                    r.id === responder.id \n                      ? { ...r, status: 'on_scene' as const }\n                      : r\n                  );\n                  latestRespondersRef.current = updated;\n                  return updated;\n                });\n                \n                // Remove route from map\n                if (map && map.isStyleLoaded && map.isStyleLoaded()) {\n                  try {\n                    const routeSourceId = `responder-route-${responder.id}`;\n                    const routeLayerId = `responder-route-layer-${responder.id}`;\n                    if (map.getLayer && map.getLayer(routeLayerId)) {\n                      map.removeLayer(routeLayerId);\n                    }\n                    if (map.getSource && map.getSource(routeSourceId)) {\n                      map.removeSource(routeSourceId);\n                    }\n                  } catch (error) {\n                    console.error(`[Route] Error removing route from map:`, error);\n                  }\n                }\n                \n                console.log(`[Responder] âœ… Team ${responder.team_number} TOUCHED FIRE EDGE at ${distanceMeters.toFixed(0)}m from center! ON SCENE`);\n                console.log(`[Responder] ðŸ”¥ Fire radius: ${currentRadius.toFixed(0)}m - Beginning suppression operations!`);\n                \n                // Skip the rest of the animation for this responder\n                continue;\n              }\n            }\n          }\n\n          // Update current position in database every 5 seconds\n          if (Math.random() < 0.012) { // ~5 seconds at 60fps\n            // Try units table first, fallback to responders for backward compatibility\n            const updatePosition = async () => {\n              try {\n                await supabase.from('units').update({\n                  current_lat: currentPos[1],\n                  current_lon: currentPos[0]\n                }).eq('id', responder.id);\n              } catch {\n                await supabase.from('responders').update({\n                  current_lat: currentPos[1],\n                  current_lon: currentPos[0]\n                }).eq('id', responder.id);\n              }\n            };\n            updatePosition();\n          }\n\n          // When responder reaches destination, keep them en_route until they touch the fire\n          if (responder.progress >= 1 && responder.status === 'dispatched') {\n            responder.status = 'en_route';\n            \n            // Update database to en_route\n            const updateToEnRoute = async () => {\n              try {\n                await supabase.from('units').update({ status: 'en_route' }).eq('id', responder.id);\n              } catch {\n                await supabase.from('responders').update({ status: 'en_route' }).eq('id', responder.id);\n              }\n            };\n            await updateToEnRoute();\n            \n            console.log(`[Responder] Team ${responder.team_number} arrived at fire location, approaching fire edge...`);\n            \n            // Remove route from map when arrived at location\n            if (map && map.isStyleLoaded && map.isStyleLoaded()) {\n              try {\n                const routeSourceId = `responder-route-${responder.id}`;\n                const routeLayerId = `responder-route-layer-${responder.id}`;\n                if (map.getLayer && map.getLayer(routeLayerId)) {\n                  map.removeLayer(routeLayerId);\n                }\n                if (map.getSource && map.getSource(routeSourceId)) {\n                  map.removeSource(routeSourceId);\n                }\n              } catch (error) {\n                console.error(`[Route] Error removing route from map:`, error);\n              }\n            }\n          }\n          \n          // FALLBACK: Check if responder touches fire edge (after reaching destination)\n          // This should rarely trigger since we check during movement above\n          if (responder.progress >= 1 && responder.status === 'en_route') {\n            const incident = incidents.find(i => String(i.id) === String(responder.incident_id));\n            if (incident) {\n              const [fireLon, fireLat] = incident.coordinates;\n              const [truckLon, truckLat] = responder.marker?.getLngLat ? [responder.marker.getLngLat().lng, responder.marker.getLngLat().lat] : [fireLon, fireLat];\n              \n              // Get fire state to calculate ACTUAL current fire radius\n              const incidentKey = typeof incident.id === 'number' ? incident.id : parseInt(String(incident.id), 10);\n              const fireState = fireStateRef.current[incidentKey];\n              if (fireState) {\n                // Calculate the current radius multiplier (same logic as in animateFire)\n                const now = Date.now();\n                const elapsedSeconds = (now - (fireState.startTime || now)) / 1000;\n                \n                // Check if other responders are already on scene (use ref for latest value)\n                const othersOnScene = latestRespondersRef.current.filter(\n                  r => String(r.incident_id) === String(incident.id) && r.status === 'on_scene' && r.id !== responder.id\n                ).length;\n                \n                let currentRadiusMultiplier = 1.0;\n                if (othersOnScene > 0 && fireState.containmentStartTime) {\n                  // Fire is already being contained\n                  const containmentSeconds = (now - fireState.containmentStartTime) / 1000;\n                  const shrinkProgress = Math.min(containmentSeconds / (20 / othersOnScene), 1);\n                  currentRadiusMultiplier = 1 - (shrinkProgress * 0.95);\n                } else {\n                  // Fire is still growing\n                  const growthProgress = Math.min(elapsedSeconds / 240, 1);\n                  const easedGrowth = 1 - Math.pow(1 - growthProgress, 1.8);\n                  const pulse = Math.sin(elapsedSeconds * fireState.waveSpeed + fireState.seed) * 0.01;\n                  currentRadiusMultiplier = 0.02 + (easedGrowth * 0.98) + pulse;\n                }\n                \n                const currentRadius = fireState.baseRadius * currentRadiusMultiplier;\n                \n                // Calculate distance from truck to fire center\n                const distanceKm = calculateDistance(truckLat, truckLon, fireLat, fireLon);\n                const distanceMeters = distanceKm * 1000;\n                \n                console.log(`[Responder] Team ${responder.team_number} distance to fire: ${distanceMeters.toFixed(0)}m, fire radius: ${currentRadius.toFixed(0)}m`);\n                \n                // If truck is within fire radius + 50m buffer (touching fire edge)\n                if (distanceMeters <= currentRadius + 50) {\n                  responder.status = 'on_scene';\n                  \n                  const updateToOnScene = async () => {\n                    try {\n                      await supabase.from('units').update({\n                        status: 'on_scene',\n                        arrived_at: new Date().toISOString()\n                      }).eq('id', responder.id);\n                    } catch {\n                      await supabase.from('responders').update({\n                        status: 'on_scene',\n                        arrived_at: new Date().toISOString()\n                      }).eq('id', responder.id);\n                    }\n                  };\n                  await updateToOnScene();\n                  \n                  // CRITICAL: Update React state AND ref immediately so fire animation sees the responder on scene\n                  setResponders(prev => {\n                    const updated = prev.map(r => \n                      r.id === responder.id \n                        ? { ...r, status: 'on_scene' as const }\n                        : r\n                    );\n                    latestRespondersRef.current = updated;\n                    return updated;\n                  });\n                  \n                  console.log(`[Responder] âœ… Team ${responder.team_number} made contact with fire! ON SCENE`);\n                  console.log(`[Responder] ðŸ”¥ Beginning fire suppression operations`);\n                }\n              }\n            }\n          }\n        }\n      }\n\n      animationFrameId = requestAnimationFrame(animateResponders);\n    };\n\n    animateResponders();\n\n    return () => {\n      console.log('[Responder Animation] Cleanup');\n      if (animationFrameId) {\n        cancelAnimationFrame(animationFrameId);\n      }\n      \n      // Clean up markers and routes\n      respondersRef.forEach(r => {\n        if (r.marker) {\n          try {\n            r.marker.remove();\n          } catch (error) {\n            console.error('Error removing marker:', error);\n          }\n        }\n        // Clean up route layers\n        if (map && map.isStyleLoaded && map.isStyleLoaded()) {\n          try {\n            const routeSourceId = `responder-route-${r.id}`;\n            const routeLayerId = `responder-route-layer-${r.id}`;\n            if (map.getLayer && map.getLayer(routeLayerId)) {\n              map.removeLayer(routeLayerId);\n            }\n            if (map.getSource && map.getSource(routeSourceId)) {\n              map.removeSource(routeSourceId);\n            }\n          } catch (error) {\n            console.error('Error cleaning up route:', error);\n          }\n        }\n      });\n    };\n  }, [responders, incidents, selectedIncidentId, firestations, unitUpdateCallback]);\n\n  // Update AI routes and evacuation zones on map\n  useEffect(() => {\n    const map = mapRef.current;\n    if (!map || !map.isStyleLoaded()) return;\n\n    // Wait for map to be fully loaded with all sources\n    const updateSources = () => {\n      try {\n        // Update AI routes only if source exists\n        if (map.getSource(aiRouteSourceId)) {\n          const aiSource = map.getSource(aiRouteSourceId) as mapboxgl.GeoJSONSource;\n          if (aiSource && typeof aiSource.setData === 'function') {\n            const routeFeatures = aiRecommendedRoutes.map((route: any) => ({\n              type: 'Feature' as const,\n              properties: {\n                station_id: route.station_id,\n                reason: route.reason,\n                risk_score: route.risk_score\n              },\n              geometry: route.new_route?.geometry || {\n                type: 'LineString' as const,\n                coordinates: route.new_route?.waypoints || []\n              }\n            }));\n\n            aiSource.setData({\n              type: 'FeatureCollection',\n              features: routeFeatures\n            });\n          }\n        }\n\n        // Update evacuation zones only if source exists\n        if (map.getSource(evacuationSourceId)) {\n          const evacSource = map.getSource(evacuationSourceId) as mapboxgl.GeoJSONSource;\n          if (evacSource && typeof evacSource.setData === 'function') {\n            const evacuationFeatures = evacuationZones.map((zone: any) => ({\n              type: 'Feature' as const,\n              properties: {\n                fire_id: zone.fire_id,\n                zone_name: zone.zone_name\n              },\n              geometry: {\n                type: 'Polygon' as const,\n                coordinates: [zone.polygon || []]\n              }\n            }));\n\n            evacSource.setData({\n              type: 'FeatureCollection',\n              features: evacuationFeatures\n            });\n          }\n        }\n      } catch (error) {\n        console.error('Error updating map sources:', error);\n      }\n    };\n\n    // If map is already loaded, update immediately\n    if (map.loaded()) {\n      updateSources();\n    } else {\n      // Otherwise wait for load event\n      map.once('load', updateSources);\n    }\n  }, [aiRecommendedRoutes, evacuationZones]);\n\n  useEffect(() => {\n    if (!mapContainerRef.current || loading) return;\n\n    // Set Mapbox access token\n    mapboxgl.accessToken = 'pk.eyJ1Ijoic3BhbnVnYW50aTMxIiwiYSI6ImNtaDVwbzBlYzA1bTkybnB6azQxZnEwOGEifQ.eCNufvFartJqVo8Nwkwkeg';\n\n    // Initialize map\n    mapRef.current = new mapboxgl.Map({\n      container: mapContainerRef.current,\n      style: 'mapbox://styles/mapbox/dark-v11',\n      center: [-122.0, 38.5],\n      zoom: 7.5,\n      pitch: 45,\n      bearing: 0,\n      attributionControl: false\n    });\n\n    const map = mapRef.current;\n\n    // Navigation and fullscreen controls removed per user request\n    \n    // Add scale control\n    map.addControl(new mapboxgl.ScaleControl({ maxWidth: 100, unit: 'imperial' }), 'bottom-left');\n\n    // Emit initial map center\n    if (onMapMove) {\n      const center = map.getCenter();\n      onMapMove({ lat: center.lat, lon: center.lng });\n    }\n\n    // Track map movement\n    map.on('moveend', () => {\n      if (onMapMove) {\n        const center = map.getCenter();\n        onMapMove({ lat: center.lat, lon: center.lng });\n      }\n    });\n\n    // Call onMapReady callback with navigation function\n    if (onMapReady) {\n      onMapReady(navigateToIncident);\n    }\n\n    // Wait for map to load\n    map.on('load', () => {\n    // Add terrain source\n    map.addSource('mapbox-dem', {\n      type: 'raster-dem',\n      url: 'mapbox://mapbox.terrain-rgb',\n      tileSize: 512,\n      maxzoom: 14\n    });\n\n      // Set terrain with exaggeration\n    map.setTerrain({ \n      source: 'mapbox-dem', \n      exaggeration: 1.5 \n    });\n\n    // Add 3D buildings layer\n    map.addLayer({\n      id: '3d-buildings',\n      source: 'composite',\n      'source-layer': 'building',\n      filter: ['==', 'extrude', 'true'],\n      type: 'fill-extrusion',\n      paint: {\n        'fill-extrusion-color': '#888',\n        'fill-extrusion-height': ['get', 'height'],\n        'fill-extrusion-opacity': 0.6\n      }\n    });\n\n      // Add sky layer\n    map.addLayer({\n      id: 'sky',\n      type: 'sky',\n      paint: {\n        'sky-type': 'atmosphere',\n        'sky-atmosphere-sun': [0.0, 0.0],\n        'sky-atmosphere-sun-intensity': 15\n      }\n    });\n\n      // Initialize dynamic fire polygons for active incidents\n      activeIncidents.forEach((incident) => {\n        const seed = Math.random() * Math.PI * 2;\n        \n        // Generate wind-influenced growth vectors using CURRENT wind\n        // These values will be LOCKED for this fire and won't change\n        const numVectors = 16; // Fewer directional segments for simpler shapes\n        const growthVectors = generateWindInfluencedGrowthVectors(\n          numVectors,\n          windSpeed,\n          windDirection\n        );\n        \n        const incidentKey = typeof incident.id === 'number' ? incident.id : parseInt(String(incident.id), 10);\n        fireStateRef.current[incidentKey] = {\n          baseRadius: getBaseRadiusMeters(incident) * 2.5, // Allow larger expansion (2.5x larger)\n          roughness: 0.2 + Math.random() * 0.15, // Less roughness for more stable edges\n          waveSpeed: 0.3 + Math.random() * 0.3,  // Slower wave speed\n          amplitude: 90 + Math.random() * 110,\n          expansionRate: getExpansionRate(incident),\n          seed,\n          growthVectors,\n          startTime: Date.now(), // Track when this fire started\n          initialWindSpeed: windSpeed, // Lock initial wind speed\n          initialWindDirection: windDirection // Lock initial wind direction\n        };\n      });\n\n      const initialFireFeatures: FeatureCollection<GeoJSON.Polygon, FireFeatureProperties> = {\n        type: 'FeatureCollection',\n        features: activeIncidents.map((incident) => {\n          const incidentKey = typeof incident.id === 'number' ? incident.id : parseInt(String(incident.id), 10);\n          const state = fireStateRef.current[incidentKey];\n          return createFireFeature(incident, state.baseRadius * 0.02, { // Start tiny (2% of base)\n            roughness: state.roughness,\n            seed: state.seed,\n            intensity: 0.55,\n            points: 24, // Fewer edges for simpler polygon\n            growthVectors: state.growthVectors,\n            elapsedTime: 0 // Just starting\n          });\n        })\n      };\n\n      map.addSource(fireSourceId, {\n        type: 'geojson',\n        data: initialFireFeatures\n      });\n\n      map.addLayer({\n        id: fireLayerId,\n        type: 'fill',\n        source: fireSourceId,\n        paint: {\n          'fill-color': [\n            'interpolate',\n            ['linear'],\n            ['get', 'intensity'],\n            0, 'rgba(140, 20, 0, 0.35)',      // Very dark red (core/oldest)\n            0.2, 'rgba(180, 35, 5, 0.45)',    // Deep maroon-red\n            0.35, 'rgba(200, 50, 10, 0.55)',  // Dark burnt orange\n            0.5, 'rgba(220, 70, 15, 0.65)',   // Rich orange-red\n            0.65, 'rgba(235, 90, 25, 0.7)',   // Deeper orange\n            0.8, 'rgba(245, 110, 35, 0.75)',  // Bright orange\n            1, 'rgba(255, 130, 50, 0.8)'      // Lighter orange (edges/newest)\n          ],\n          'fill-opacity': [\n            'interpolate',\n            ['linear'],\n            ['zoom'],\n            7, 0.5,    // More visible at far zoom\n            10, 0.65,  // Increased opacity\n            13, 0.75,\n            16, 0.85   // Very visible when zoomed in\n          ],\n          'fill-outline-color': 'rgba(200, 60, 0, 0.5)' // Darker orange-red outline\n        }\n      });\n\n      map.addLayer(\n        {\n          id: 'fire-glow-outline',\n          type: 'line',\n          source: fireSourceId,\n          paint: {\n            'line-color': 'rgba(240, 100, 40, 0.7)',  // Brighter orange glow for edge\n            'line-width': [\n              'interpolate',\n              ['linear'],\n              ['zoom'],\n              7, 1.5,\n              12, 3,\n              15, 5\n            ],\n            'line-blur': 4,\n            'line-opacity': 0.75\n          }\n        },\n        fireLayerId\n      );\n\n      // Add AI-recommended routes source and layer\n      map.addSource(aiRouteSourceId, {\n        type: 'geojson',\n        data: {\n          type: 'FeatureCollection',\n          features: []\n        }\n      });\n\n      map.addLayer({\n        id: aiRouteLayerId,\n        type: 'line',\n        source: aiRouteSourceId,\n        layout: {\n          'line-join': 'round',\n          'line-cap': 'round'\n        },\n        paint: {\n          'line-color': '#FF8C00', // Dark orange for AI routes\n          'line-width': 5,\n          'line-dasharray': [2, 2], // Dashed line\n          'line-opacity': 0.9\n        }\n      });\n\n      // Add evacuation zones source and layer\n      map.addSource(evacuationSourceId, {\n        type: 'geojson',\n        data: {\n          type: 'FeatureCollection',\n          features: []\n        }\n      });\n\n      map.addLayer({\n        id: evacuationLayerId,\n        type: 'fill',\n        source: evacuationSourceId,\n        paint: {\n          'fill-color': '#DC2626', // Red for evacuation zones\n          'fill-opacity': 0.15\n        }\n      });\n\n      map.addLayer({\n        id: 'evacuation-outline',\n        type: 'line',\n        source: evacuationSourceId,\n        paint: {\n          'line-color': '#DC2626',\n          'line-width': 2,\n          'line-dasharray': [4, 2],\n          'line-opacity': 0.8\n        }\n      });\n\n      const animateFire = (timestamp: number) => {\n        if (!mapRef.current) return;\n        if (fireStartTimeRef.current === null) {\n          fireStartTimeRef.current = timestamp;\n        }\n\n        const elapsedSeconds = (timestamp - fireStartTimeRef.current) / 1000;\n\n        const features = activeIncidents.map((incident) => {\n          const incidentKey = typeof incident.id === 'number' ? incident.id : parseInt(String(incident.id), 10);\n          const state = fireStateRef.current[incidentKey];\n          if (!state) {\n            return createFireFeature(incident, getBaseRadiusMeters(incident));\n          }\n\n          // Check if responders are on scene for this fire (use ref to get latest value)\n          const respondersOnScene = latestRespondersRef.current.filter(\n            r => String(r.incident_id) === String(incident.id) && r.status === 'on_scene'\n          ).length;\n\n          let radiusMultiplier = 1.0;\n\n          if (respondersOnScene > 0) {\n            // Responders are containing the fire - STOP GROWTH and start shrinking\n            if (!state.containmentStartTime) {\n              state.containmentStartTime = timestamp;\n              state.containmentRate = 0.15 * respondersOnScene; // More responders = faster containment\n              state.respondersOnScene = respondersOnScene;\n              // Lock the fire size at the moment containment starts\n              state.maxRadiusBeforeContainment = state.baseRadius * radiusMultiplier;\n              console.log(`[Fire Containment] ${respondersOnScene} responders on scene at ${incident.name}, STOPPING fire growth and beginning containment`);\n            }\n\n            const containmentSeconds = (timestamp - state.containmentStartTime) / 1000;\n            // Fire shrinks over 20 seconds per responder (fast demo)\n            const shrinkProgress = Math.min(containmentSeconds / (20 / respondersOnScene), 1);\n            \n            // Start from the locked size (when containment began) and shrink to 5%\n            // This ensures fire doesn't grow after responders arrive\n            radiusMultiplier = 1 - (shrinkProgress * 0.95);\n\n            // Update containment percentage in Supabase\n            const newContainment = Math.min(Math.floor(shrinkProgress * 100), 100);\n            if (newContainment !== incident.containment && newContainment % 10 === 0) {\n              // Update every 10% for faster updates\n              console.log(`[Fire Containment] ${incident.name} containment: ${newContainment}%`);\n              supabase\n                .from('incidents')\n                .update({ \n                  containment: newContainment,\n                  status: newContainment >= 100 ? 'contained' : 'active'\n                })\n                .eq('id', String(incident.id))\n                .then(({ error }) => {\n                  if (error) console.error('Error updating containment:', error);\n                });\n            }\n            \n            // If fully contained, return responders to available\n            if (shrinkProgress >= 1 && newContainment >= 100) {\n              console.log(`[Fire Containment] âœ… ${incident.name} fully contained!`);\n              \n              // Reset all responders on this fire back to available (use ref for latest value)\n              // Include both on_scene AND en_route responders\n              const respondersToReset = latestRespondersRef.current.filter(\n                r => String(r.incident_id) === String(incident.id) && \n                     (r.status === 'on_scene' || r.status === 'en_route' || r.status === 'dispatched')\n              );\n              \n              const onScene = respondersToReset.filter(r => r.status === 'on_scene').length;\n              const enRoute = respondersToReset.filter(r => r.status === 'en_route').length;\n              const dispatched = respondersToReset.filter(r => r.status === 'dispatched').length;\n              console.log(`[Fire Containment] ðŸš’ Returning ${respondersToReset.length} responders to station (${onScene} on-scene, ${enRoute} en-route, ${dispatched} dispatched)`);\n              \n              // Reset all responders asynchronously\n              const resetPromises = respondersToReset.map(responder => {\n                // Get the firestation to reset position\n                const station = firestations.find(fs => fs.id === responder.firestation_id);\n                if (station) {\n                  // Remove marker if it exists\n                  if (responder.marker) {\n                    try {\n                      responder.marker.remove();\n                    } catch (e) {\n                      console.error('Error removing marker:', e);\n                    }\n                  }\n                  \n                  // Try units table first, fallback to responders\n                  const resetUnit = async () => {\n                    try {\n                      return await supabase.from('units').update({\n                        status: 'available',\n                        incident_id: null,\n                        current_lat: station.lat,\n                        current_lon: station.lon,\n                        dispatched_at: null,\n                        arrived_at: null\n                      }).eq('id', responder.id);\n                    } catch {\n                      return await supabase.from('responders').update({\n                        status: 'available',\n                        incident_id: null,\n                        current_lat: station.lat,\n                        current_lon: station.lon,\n                        dispatched_at: null,\n                        arrived_at: null\n                      }).eq('id', responder.id);\n                    }\n                  };\n                  return resetUnit()\n                    .then(({ error }) => {\n                      if (!error) {\n                        console.log(`[Fire Containment] âœ… Team ${responder.team_number} returned to available at ${station.name}`);\n                      } else {\n                        console.error(`[Fire Containment] Error resetting team ${responder.team_number}:`, error);\n                      }\n                    });\n                }\n                return Promise.resolve();\n              });\n              \n              // Wait for all responders to be reset, then update UI state\n              Promise.all(resetPromises).then(() => {\n                // Update local state to remove ALL responders for this incident\n                setResponders(prev => {\n                  const updated = prev.filter(r => \n                    String(r.incident_id) !== String(incident.id)\n                  );\n                  latestRespondersRef.current = updated;\n                  return updated;\n                });\n                \n                // Trigger responder stats refresh to update UI counts\n                if (onResponderUpdate) {\n                  setTimeout(() => {\n                    console.log('[Fire Containment] Triggering responder stats refresh');\n                    // Force a refresh by re-fetching stats\n                    fetch('/api/dispatch-unit')\n                      .then(res => res.json())\n                      .then(data => {\n                        if (unitUpdateCallback && data.totals) {\n                          unitUpdateCallback(\n                            {\n                              available: data.totals.available || 0,\n                              dispatched: data.totals.dispatched || 0,\n                              active: data.totals.on_scene || data.totals.active || 0\n                            },\n                            data.activeUnits || data.activeResponders || []\n                          );\n                        }\n                      })\n                      .catch(err => console.error('Error refreshing unit stats:', err));\n                  }, 500); // Small delay to ensure DB updates complete\n                }\n              });\n              \n              // Clear containment state and reset counters\n              state.containmentStartTime = undefined;\n              state.respondersOnScene = 0;\n              state.maxRadiusBeforeContainment = undefined;\n              \n              console.log('[Fire Containment] Fire state fully reset, ready for next incident');\n            }\n          } else {\n            // Only grow if containment hasn't started\n            // Once containment starts, this branch never executes again for this fire\n            if (!state.containmentStartTime) {\n              // Calculate growth over time with very slow, steady expansion\n              // Fire spreads slowly but visibly over 240 seconds (4 minutes)\n              const growthProgress = Math.min(elapsedSeconds / 240, 1); // 240 seconds to reach full size\n              const easedGrowth = 1 - Math.pow(1 - growthProgress, 1.8); // Even slower ease out\n              \n              // Add extremely subtle pulsing variation (barely noticeable)\n              const pulse = Math.sin(elapsedSeconds * state.waveSpeed + state.seed) * 0.01;\n              \n              // Calculate final radius with slow natural growth curve\n              // Starts at 2%, grows to 100% over 4 minutes (starts smaller)\n              radiusMultiplier = 0.02 + (easedGrowth * 0.98) + pulse;\n            } else {\n              // Containment started but responders left - keep fire at locked size\n              radiusMultiplier = 1.0;\n            }\n          }\n\n          const radiusMeters = state.baseRadius * radiusMultiplier;\n\n          // Very subtle intensity variation for stable appearance\n          const intensity = clamp(\n            0.6 + 0.15 * Math.abs(Math.sin(elapsedSeconds * 0.8 + state.seed)),\n            0.55,\n            0.85\n          );\n\n          return createFireFeature(incident, radiusMeters, {\n            time: elapsedSeconds,\n            roughness: state.roughness,\n            seed: state.seed,\n            intensity,\n            points: 24, // Fewer edges for simpler polygon\n            growthVectors: state.growthVectors,\n            elapsedTime: elapsedSeconds\n          });\n        });\n\n        const source = map.getSource(fireSourceId) as mapboxgl.GeoJSONSource | undefined;\n        if (source) {\n          source.setData({\n            type: 'FeatureCollection',\n            features\n          });\n        }\n\n        fireAnimationRef.current = requestAnimationFrame(animateFire);\n      };\n\n      fireAnimationRef.current = requestAnimationFrame(animateFire);\n\n      // Add static wildfire markers\n      incidents.forEach((incident) => {\n        const [lng, lat] = incident.coordinates;\n        if (typeof lng !== 'number' || typeof lat !== 'number') return;\n\n        const intensity = incident.intensity || 'low';\n        const isActive = incident.status === 'active';\n\n        // Create marker element\n        const markerEl = document.createElement('div');\n        markerEl.className = 'relative';\n        markerEl.style.cursor = 'pointer';\n        markerEl.style.zIndex = '100'; // Fire incidents always on top\n\n        if (isActive) {\n          const pulseEl = document.createElement('div');\n          pulseEl.className = 'absolute rounded-full border-2 opacity-30 pulse-animation';\n          pulseEl.style.width = `${getPulseSize(intensity)}px`;\n          pulseEl.style.height = `${getPulseSize(intensity)}px`;\n          pulseEl.style.borderColor = getMarkerColor(intensity);\n          pulseEl.style.transform = 'translate(-50%, -50%)';\n          pulseEl.style.top = '50%';\n          pulseEl.style.left = '50%';\n          pulseEl.style.position = 'absolute';\n          pulseEl.style.zIndex = '1';\n          markerEl.appendChild(pulseEl);\n        }\n\n        const mainMarker = document.createElement('div');\n        mainMarker.className = 'rounded-full border-2 border-white shadow-lg relative';\n        mainMarker.style.width = `${getMarkerSize(intensity)}px`;\n        mainMarker.style.height = `${getMarkerSize(intensity)}px`;\n        mainMarker.style.backgroundColor = getMarkerColor(intensity);\n        mainMarker.style.transform = 'translate(-50%, -50%)';\n        mainMarker.style.position = 'absolute';\n        mainMarker.style.top = '50%';\n        mainMarker.style.left = '50%';\n        mainMarker.style.zIndex = '100'; // Higher z-index for fire markers\n        mainMarker.style.boxShadow = `0 0 20px ${getMarkerColor(intensity)}40`;\n        markerEl.appendChild(mainMarker);\n\n        if (intensity === 'critical') {\n          const particleEl = document.createElement('div');\n          particleEl.className = 'particle-trail';\n          markerEl.appendChild(particleEl);\n        }\n\n        // Add fire name label (hidden by default, shown when selected)\n        const labelEl = document.createElement('div');\n        labelEl.className = 'absolute whitespace-nowrap fire-label';\n        labelEl.style.left = '50%';\n        labelEl.style.top = '100%';\n        labelEl.style.transform = 'translateX(-50%)';\n        labelEl.style.marginTop = '8px';\n        labelEl.style.backgroundColor = 'rgba(0, 0, 0, 0.75)';\n        labelEl.style.color = 'white';\n        labelEl.style.padding = '4px 8px';\n        labelEl.style.borderRadius = '6px';\n        labelEl.style.fontSize = '11px';\n        labelEl.style.fontWeight = '600';\n        labelEl.style.border = `1px solid ${getMarkerColor(intensity)}`;\n        labelEl.style.boxShadow = '0 2px 4px rgba(0,0,0,0.3)';\n        labelEl.style.pointerEvents = 'none';\n        labelEl.style.zIndex = '101';\n        labelEl.style.display = 'none'; // Hidden by default\n        labelEl.textContent = incident.name;\n        labelEl.setAttribute('data-fire-id', incident.id.toString());\n        markerEl.appendChild(labelEl);\n\n        const marker = new mapboxgl.Marker({ element: markerEl })\n          .setLngLat([lng, lat])\n          .addTo(map);\n\n        markerEl.addEventListener('click', () => {\n          // Set selected fire ID\n          const numericId = typeof incident.id === 'number' ? incident.id : parseInt(String(incident.id), 10);\n          setSelectedFireId(numericId);\n          \n          // Notify parent component that this incident was selected\n          if (onIncidentSelect) {\n            // Find the original incident to get all required fields\n            const originalIncident = incidents.find(i => i.id === incident.id);\n            if (originalIncident) {\n              onIncidentSelect({\n                id: originalIncident.id.toString(),\n                name: originalIncident.name,\n                risk: originalIncident.intensity as 'low' | 'medium' | 'high' | 'critical',\n                lat: lat,\n                lon: lng,\n                containment: originalIncident.containment || 0,\n                last_update: originalIncident.last_update || new Date().toISOString(),\n                description: originalIncident.description || null,\n              });\n            }\n          }\n          \n          // Find nearest fire station and display route (only for active fires)\n          if (incident.status === 'active') {\n            const nearestStation = findNearestFirestation(lat, lng, firestations);\n            if (nearestStation) {\n              displayRouteToFire(lat, lng, nearestStation.lat, nearestStation.lon);\n            }\n          }\n\n          map.flyTo({\n            center: [lng, lat],\n            zoom: 17,\n            pitch: 60,\n            bearing: map.getBearing(),\n            duration: 3500,\n            padding: { top: 260, bottom: 40, left: 40, right: 40 },\n            essential: true\n          });\n\n          if (popupRef.current) {\n            popupRef.current.remove();\n          }\n\n          const popupContent = createPopupContent(incident);\n\n          popupRef.current = new mapboxgl.Popup({ closeButton: true, closeOnClick: true, maxWidth: '380px', offset: 20, anchor: 'bottom' })\n            .setLngLat([lng, lat])\n            .setHTML(popupContent)\n            .addTo(map);\n\n          // After popup is added, wire up fullscreen toggle behavior\n          try {\n            const popupNode = popupRef.current?.getElement();\n            if (popupNode) {\n              const content = popupNode.querySelector('.mapboxgl-popup-content') as HTMLElement | null;\n              const videoEl = content?.querySelector('video[data-video-element=\"true\"]') as HTMLVideoElement | null;\n              const toggleBtn = content?.querySelector('button[data-fullscreen-toggle=\"true\"]') as HTMLButtonElement | null;\n              if (videoEl && toggleBtn) {\n                toggleBtn.onclick = async () => {\n                  try {\n                    const anyVideo: any = videoEl as any;\n                    if (!document.fullscreenElement) {\n                      if (videoEl.requestFullscreen) await videoEl.requestFullscreen();\n                      else if (anyVideo.webkitRequestFullscreen) await anyVideo.webkitRequestFullscreen();\n                      else if (anyVideo.msRequestFullscreen) await anyVideo.msRequestFullscreen();\n                    } else {\n                      const anyDoc: any = document as any;\n                      if (document.exitFullscreen) await document.exitFullscreen();\n                      else if (anyDoc.webkitExitFullscreen) await anyDoc.webkitExitFullscreen();\n                      else if (anyDoc.msExitFullscreen) await anyDoc.msExitFullscreen();\n                    }\n                  } catch (e) {\n                    console.warn('Popup fullscreen failed, opening fallback modal');\n                    // Fallback: open the React modal by dispatching a custom event the page can listen to\n                    window.dispatchEvent(new CustomEvent('openVideoModal', { detail: { fireName: incident.name } }));\n                  }\n                };\n              }\n            }\n          } catch (e) {\n            // No-op if wiring fails\n          }\n        });\n\n        markersRef.current.push(marker);\n      });\n\n      // Add firestation markers\n      firestations.forEach((firestation) => {\n        const { lat, lon, name } = firestation;\n        if (typeof lat !== 'number' || typeof lon !== 'number') return;\n\n        // Create firestation marker element\n        const markerEl = createFirestationMarker();\n\n        // Create marker\n        const marker = new mapboxgl.Marker({ \n          element: markerEl,\n          anchor: 'center'\n        })\n          .setLngLat([lon, lat])\n          .addTo(map);\n\n        // Add click event for popup\n        markerEl.addEventListener('click', (e) => {\n          e.stopPropagation();\n          if (popupRef.current) {\n            popupRef.current.remove();\n          }\n\n          const popupContent = createFirestationPopupContent(firestation);\n\n          popupRef.current = new mapboxgl.Popup({ \n            closeButton: true, \n            closeOnClick: true, \n            maxWidth: '300px', \n            offset: 25, \n            anchor: 'bottom' \n          })\n            .setLngLat([lon, lat])\n            .setHTML(popupContent)\n            .addTo(map);\n        });\n\n        markersRef.current.push(marker);\n      });\n    });\n\n    // Cursor interactions\n    map.on('mousemove', () => {\n      map.getCanvas().style.cursor = 'grab';\n    });\n\n    map.on('mousedown', () => {\n      map.getCanvas().style.cursor = 'grabbing';\n    });\n\n    map.on('mouseup', () => {\n      map.getCanvas().style.cursor = 'grab';\n    });\n\n    // Cleanup\n    return () => {\n      markersRef.current.forEach(marker => marker.remove());\n      markersRef.current = [];\n      if (popupRef.current) {\n        popupRef.current.remove();\n      }\n      if (fireAnimationRef.current !== null) {\n        cancelAnimationFrame(fireAnimationRef.current);\n        fireAnimationRef.current = null;\n      }\n      fireStartTimeRef.current = null;\n      if (mapRef.current && mapRef.current.getLayer('fire-glow-outline')) {\n        mapRef.current.removeLayer('fire-glow-outline');\n      }\n      if (mapRef.current && mapRef.current.getLayer(fireLayerId)) {\n        mapRef.current.removeLayer(fireLayerId);\n      }\n      if (mapRef.current && mapRef.current.getSource(fireSourceId)) {\n        mapRef.current.removeSource(fireSourceId);\n      }\n      // Clean up route layers\n      if (mapRef.current && mapRef.current.getLayer(routeArrowLayerId)) {\n        mapRef.current.removeLayer(routeArrowLayerId);\n      }\n      if (mapRef.current && mapRef.current.getLayer(routeLayerId)) {\n        mapRef.current.removeLayer(routeLayerId);\n      }\n      if (mapRef.current && mapRef.current.getSource(routeSourceId)) {\n        mapRef.current.removeSource(routeSourceId);\n      }\n      map.remove();\n    };\n  }, [loading, incidents, firestations, displayRouteToFire]);\n\n  // Wind values are now LOCKED when fire is created - no updates when wind changes\n  // This prevents fire from constantly changing as user pans/zooms the map\n  // Each fire uses its initial wind conditions throughout its lifecycle\n\n  // Update fire label visibility when selected fire changes\n  useEffect(() => {\n    // Hide all labels first\n    document.querySelectorAll('.fire-label').forEach((label) => {\n      (label as HTMLElement).style.display = 'none';\n    });\n    \n    // Show label for selected fire\n    if (selectedFireId !== null) {\n      const selectedLabel = document.querySelector(`.fire-label[data-fire-id=\"${selectedFireId}\"]`);\n      if (selectedLabel) {\n        (selectedLabel as HTMLElement).style.display = 'block';\n      }\n    }\n  }, [selectedFireId]);\n\n  // Reset view function\n  const resetView = useCallback(() => {\n    if (mapRef.current) {\n      // Clear selected fire\n      setSelectedFireId(null);\n      \n      // Clear any existing route\n      if (mapRef.current.getLayer(routeArrowLayerId)) {\n        mapRef.current.removeLayer(routeArrowLayerId);\n      }\n      if (mapRef.current.getLayer(routeLayerId)) {\n        mapRef.current.removeLayer(routeLayerId);\n      }\n      if (mapRef.current.getSource(routeSourceId)) {\n        mapRef.current.removeSource(routeSourceId);\n      }\n      \n      mapRef.current.flyTo({\n        center: [-122.0, 38.5],\n        zoom: 7.5,\n        pitch: 45,\n        bearing: 0,\n        duration: 1500\n      });\n    }\n  }, []);\n\n  // Show loading state\n  if (loading) {\n    return (\n      <div className={`w-full h-full relative ${className} flex items-center justify-center`}>\n        <div className=\"text-white/70 text-sm\">Loading incident data...</div>\n      </div>\n    );\n  }\n\n  // Show error state\n  if (error) {\n    return (\n      <div className={`w-full h-full relative ${className} flex items-center justify-center`}>\n        <div className=\"text-red-400 text-sm\">Error: {error}</div>\n      </div>\n    );\n  }\n\n  return (\n    <div className={`w-full h-full relative ${className}`}>\n      {/* Vignette overlay for depth */}\n      <div className=\"vignette-overlay z-10 pointer-events-none\" />\n      \n      {/* Map container */}\n      <div\n        ref={mapContainerRef}\n        className=\"absolute inset-0 z-0\"\n        style={{ width: '100%', height: '100%', pointerEvents: 'auto' }}\n        />\n\n        {/* Custom Reset View Button - Positioned at bottom left to cover Mapbox logo */}\n      <div className=\"absolute bottom-0 left-0 z-30\">\n          <button\n            onClick={resetView}\n          className=\"bg-black/20 backdrop-blur-md border border-white/20 rounded-lg px-2 py-1 text-white text-xs font-medium hover:bg-black/30 hover:border-white/30 transition-all duration-200 flex items-center gap-1 m-1\"\n            title=\"Reset to California View\"\n          >\n            <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n              <path d=\"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\"/>\n              <path d=\"M21 3v5h-5\"/>\n              <path d=\"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\"/>\n              <path d=\"M3 21v-5h5\"/>\n            </svg>\n            Reset View\n          </button>\n        </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2658, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/hooks/use-vapi.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\nimport Vapi from '@vapi-ai/web';\n\nexport interface VapiMessage {\n  type: string;\n  transcript?: string;\n  role?: 'user' | 'assistant';\n  content?: string;\n  timestamp?: string;\n}\n\nexport function useVapi() {\n  const [vapi, setVapi] = useState<Vapi | null>(null);\n  const [isSessionActive, setIsSessionActive] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [messages, setMessages] = useState<VapiMessage[]>([]);\n  const [volumeLevel, setVolumeLevel] = useState(0);\n\n  useEffect(() => {\n    const vapiInstance = new Vapi(process.env.NEXT_PUBLIC_VAPI_PUBLIC_KEY || '');\n    setVapi(vapiInstance);\n\n    // Event listeners\n    vapiInstance.on('call-start', () => {\n      console.log('Call started');\n      setIsSessionActive(true);\n    });\n\n    vapiInstance.on('call-end', () => {\n      console.log('Call ended');\n      setIsSessionActive(false);\n      setIsSpeaking(false);\n    });\n\n    vapiInstance.on('speech-start', () => {\n      console.log('Assistant started speaking');\n      setIsSpeaking(true);\n    });\n\n    vapiInstance.on('speech-end', () => {\n      console.log('Assistant finished speaking');\n      setIsSpeaking(false);\n    });\n\n    vapiInstance.on('message', (message: any) => {\n      console.log('Message received:', message);\n      \n      // Only process final transcripts, not partial ones\n      if (message.type === 'transcript' && message.transcript && message.transcriptType === 'final') {\n        setMessages((prev) => {\n          const timestamp = new Date().toLocaleTimeString('en-US', { \n            hour: '2-digit', \n            minute: '2-digit' \n          });\n          \n          // Check if the last message is from the same role and recent (within 5 seconds)\n          const lastMessage = prev[prev.length - 1];\n          const isRecentMessage = lastMessage && \n            lastMessage.role === message.role && \n            lastMessage.timestamp === timestamp;\n          \n          if (isRecentMessage) {\n            // Append to the existing message\n            const updated = [...prev];\n            updated[updated.length - 1] = {\n              ...lastMessage,\n              content: lastMessage.content + ' ' + message.transcript,\n            };\n            return updated;\n          } else {\n            // Add as a new message\n            return [\n              ...prev,\n              {\n                type: 'transcript',\n                role: message.role,\n                content: message.transcript,\n                timestamp,\n              },\n            ];\n          }\n        });\n      }\n    });\n\n    vapiInstance.on('volume-level', (level: number) => {\n      setVolumeLevel(level);\n    });\n\n    vapiInstance.on('error', (error: any) => {\n      console.warn('VAPI error:', error);\n      // Don't treat VAPI errors as critical - they're often just connection issues\n    });\n\n    return () => {\n      vapiInstance.stop();\n    };\n  }, []);\n\n  const start = useCallback(async () => {\n    if (!vapi) return;\n\n    try {\n      // Use the assistant ID from VAPI dashboard\n      await vapi.start('b497d653-42b2-4657-b831-9dfc975254a5');\n    } catch (error) {\n      console.error('Failed to start VAPI:', error);\n    }\n  }, [vapi]);\n\n  const stop = useCallback(() => {\n    if (!vapi) return;\n    vapi.stop();\n  }, [vapi]);\n\n  const send = useCallback((message: string) => {\n    if (!vapi) return;\n    vapi.send({\n      type: 'add-message',\n      message: {\n        role: 'system',\n        content: message,\n      },\n    });\n  }, [vapi]);\n\n  const receiveAgentMessage = useCallback((agentData: { action: string; message: string; data?: any }) => {\n    if (!vapi) return;\n    \n    // Send to VAPI as system message so it speaks it out\n    vapi.send({\n      type: 'add-message',\n      message: {\n        role: 'system',\n        content: `ALERT: ${agentData.message}. Please acknowledge.`\n      }\n    });\n    \n    // Also add to local messages for UI display\n    setMessages(prev => [...prev, {\n      type: 'agent-alert',\n      role: 'assistant',\n      content: agentData.message,\n      timestamp: new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })\n    }]);\n  }, [vapi]);\n\n  return {\n    isSessionActive,\n    isSpeaking,\n    messages,\n    volumeLevel,\n    start,\n    stop,\n    send,\n    receiveAgentMessage,\n  };\n}\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2812, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/hooks/use-weather.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useState, useCallback } from 'react';\n\nexport interface WeatherData {\n  wind: {\n    speed: number;\n    deg: number;\n    direction: string;\n  };\n  temp: number;\n  humidity: number;\n  visibility: number | null;\n  airQuality: {\n    aqi: number | null;\n    pm2_5: number | null;\n    pm10: number | null;\n  } | null;\n  description: string;\n  location: string;\n}\n\nexport function useWeather(lat: number | null, lon: number | null) {\n  const [weather, setWeather] = useState<WeatherData | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchWeather = useCallback(async (latitude: number, longitude: number) => {\n    setLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch(\n        `/api/weather?lat=${latitude}&lon=${longitude}`\n      );\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({ error: 'Unknown error' }));\n        const errorMessage = errorData.error || `HTTP ${response.status}: ${response.statusText}`;\n        console.error('Weather API error:', errorMessage);\n        throw new Error(errorMessage);\n      }\n\n      const data = await response.json();\n      setWeather(data);\n    } catch (err) {\n      console.error('Error fetching weather:', err);\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error';\n      setError(errorMessage);\n      setWeather(null);\n      \n      // Set fallback weather data to prevent UI breakage\n      setWeather({\n        wind: { speed: 0, deg: 0, direction: 'N/A' },\n        temp: 0,\n        humidity: 0,\n        visibility: null,\n        airQuality: null,\n        description: 'Weather data unavailable',\n        location: 'Unknown',\n      });\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (lat !== null && lon !== null) {\n      // Debounce the weather fetch to avoid too many API calls\n      const timeoutId = setTimeout(() => {\n        fetchWeather(lat, lon);\n      }, 1000); // Wait 1 second after map stops moving\n\n      return () => clearTimeout(timeoutId);\n    }\n  }, [lat, lon, fetchWeather]);\n\n  return { weather, loading, error, refetch: fetchWeather };\n}\n\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAsBO,SAAS,WAAW,GAAkB,EAAE,GAAkB;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4OAAQ,EAAqB;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4OAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,4OAAQ,EAAgB;IAElD,MAAM,eAAe,IAAA,+OAAW,EAAC,OAAO,UAAkB;QACxD,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MACrB,CAAC,iBAAiB,EAAE,SAAS,KAAK,EAAE,WAAW;YAGjD,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,YAAY,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;wBAAE,OAAO;oBAAgB,CAAC;gBAC/E,MAAM,eAAe,UAAU,KAAK,IAAI,CAAC,KAAK,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,SAAS,UAAU,EAAE;gBACzF,QAAQ,KAAK,CAAC,sBAAsB;gBACpC,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,WAAW;QACb,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,2BAA2B;YACzC,MAAM,eAAe,eAAe,QAAQ,IAAI,OAAO,GAAG;YAC1D,SAAS;YACT,WAAW;YAEX,mDAAmD;YACnD,WAAW;gBACT,MAAM;oBAAE,OAAO;oBAAG,KAAK;oBAAG,WAAW;gBAAM;gBAC3C,MAAM;gBACN,UAAU;gBACV,YAAY;gBACZ,YAAY;gBACZ,aAAa;gBACb,UAAU;YACZ;QACF,SAAU;YACR,WAAW;QACb;IACF,GAAG,EAAE;IAEL,IAAA,6OAAS,EAAC;QACR,IAAI,QAAQ,QAAQ,QAAQ,MAAM;YAChC,yDAAyD;YACzD,MAAM,YAAY,WAAW;gBAC3B,aAAa,KAAK;YACpB,GAAG,OAAO,uCAAuC;YAEjD,OAAO,IAAM,aAAa;QAC5B;IACF,GAAG;QAAC;QAAK;QAAK;KAAa;IAE3B,OAAO;QAAE;QAAS;QAAS;QAAO,SAAS;IAAa;AAC1D","debugId":null}},
    {"offset": {"line": 2885, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/components/IncidentsList.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState } from 'react'\nimport { supabase } from '@/lib/supabase-client'\nimport { Badge } from '@/components/ui/badge'\nimport { MapPin } from 'lucide-react'\n\ntype Incident = {\n  id: string\n  name: string | null\n  priority: 'low' | 'medium' | 'high' | 'critical' | null\n  risk?: 'low' | 'medium' | 'high' | 'critical' | null // Backward compatibility\n  lat: number | null\n  lon: number | null\n  containment: number | null\n  last_update: string\n  incident_type?: string | null\n}\n\nfunction PriorityBadge({ priority, risk }: { priority?: Incident['priority'], risk?: Incident['risk'] }) {\n  // Support both 'priority' (police) and 'risk' (fire) for backward compatibility\n  const level = priority || risk || null;\n  const color =\n    level === 'critical' ? '#FF6B00' :\n    level === 'high' ? '#FF4444' :\n    level === 'medium' ? '#FFA800' :\n    '#00C2FF'\n  return (\n    <Badge className=\"border-0 text-xs font-medium px-2 py-1 whitespace-nowrap flex-shrink-0\"\n      style={{ backgroundColor: `${color}33`, color }}>\n      {level ? level[0].toUpperCase() + level.slice(1) : 'N/A'}\n    </Badge>\n  )\n}\n\ninterface IncidentsListProps {\n  onIncidentClick?: (incident: Incident) => void;\n  onIncidentCountChange?: (count: number) => void;\n  onIncidentsUpdate?: (incidents: Incident[]) => void;\n}\n\nexport default function IncidentsList({ onIncidentClick, onIncidentCountChange, onIncidentsUpdate }: IncidentsListProps) {\n  const [rows, setRows] = useState<Incident[]>([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    let cancelled = false\n\n    ;(async () => {\n      const { data, error } = await supabase\n        .from('incidents')\n        .select('*')\n        .order('last_update', { ascending: false })\n        .limit(25)\n\n      if (cancelled) return\n      if (error) setError(error.message)\n      else {\n        const incidents = (data ?? []) as Incident[]\n        setRows(incidents)\n        onIncidentCountChange?.(incidents.length)\n        onIncidentsUpdate?.(incidents)\n      }\n      setLoading(false)\n    })()\n\n    // realtime updates\n    const ch = supabase\n      .channel('incidents-rt')\n      .on('postgres_changes',\n        { event: '*', schema: 'public', table: 'incidents' },\n        payload => {\n          const n = payload.new as Incident\n          setRows(prev => {\n            const without = prev.filter(i => i.id !== n.id)\n            const newRows = [n, ...without].slice(0, 25)\n            onIncidentCountChange?.(newRows.length)\n            onIncidentsUpdate?.(newRows)\n            return newRows\n          })\n        })\n      .subscribe()\n\n    return () => { cancelled = true; supabase.removeChannel(ch) }\n  }, [])\n\n  if (loading) return <div className=\"text-white/70 text-sm\">Loadingâ€¦</div>\n  if (error)   return <div className=\"text-red-400 text-sm\">Error: {error}</div>\n  if (!rows.length) return <div className=\"text-white/60 text-sm\">No incidents yet.</div>\n\n  return (\n    <div className=\"space-y-4\">\n      {rows.map((r) => (\n        <div\n          key={r.id}\n          className={`bg-white/[0.03] hover:bg-white/[0.06] border border-white/10 rounded-lg p-4 transition-all duration-200 hover:scale-[1.02] overflow-hidden ${\n            r.lat && r.lon && !isNaN(r.lat) && !isNaN(r.lon) && r.lat !== 0 && r.lon !== 0\n              ? 'cursor-pointer' \n              : 'cursor-not-allowed opacity-60'\n          }`}\n          onClick={() => onIncidentClick?.(r)}\n        >\n          <div className=\"flex items-start justify-between mb-3\">\n            <span className=\"text-xs font-mono text-white/50\">{r.id.slice(0,8).toUpperCase()}</span>\n            <PriorityBadge priority={r.priority} risk={r.risk} />\n          </div>\n\n          <p className=\"text-sm font-semibold mb-2 text-white break-words leading-tight\">\n            {r.name ?? 'Unnamed Incident'}\n          </p>\n\n          <div className=\"flex items-center gap-2 text-xs text-white/60\">\n            <MapPin className=\"w-3 h-3\" />\n            <span>\n              {r.lat?.toFixed(1) ?? 'â€”'}Â°N, {r.lon?.toFixed(1) ?? 'â€”'}Â°W\n            </span>\n          </div>\n\n          <div className=\"flex items-center justify-between mt-2\">\n            <div className=\"text-xs text-white/50\">\n              Status:{' '}\n              <span className=\"text-[#00C2FF] font-medium\">\n                {(r.containment ?? 0)}% resolved\n              </span>\n            </div>\n            {r.incident_type && (\n              <span className=\"text-xs text-white/40 italic\">\n                {r.incident_type}\n              </span>\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3109, "column": 0}, "map": {"version":3,"sources":["file:///Users/leonliu/projects/tartanhacks/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect, useCallback } from \"react\"\nimport { Play, SkipBack, SkipForward, Wind, Activity, AlertTriangle, Mic, Volume2, ChevronLeft, ChevronRight, PanelLeft, PanelRight, MicOff, ChevronUp, Minimize2, Bot, Shield } from \"lucide-react\"\nimport { Badge } from \"@/components/ui/badge\"\nimport { Button } from \"@/components/ui/button\"\nimport CaliforniaMap from \"@/components/california-map\"\nimport LeafletMap from \"@/components/leaflet-map\"\nimport { useVapi } from \"@/hooks/use-vapi\"\nimport { useWeather } from \"@/hooks/use-weather\"\nimport IncidentsList from '@/components/IncidentsList'\nimport { PoliceIncident, FireIncident } from '@/lib/composio-telegram-service'\n\n// Helper functions for severity-based colors\nfunction getHumidityColor(humidity: number): string {\n  if (humidity < 20) return '#FF4444'; // Critical - very dry, high fire risk\n  if (humidity < 30) return '#FF6B00'; // High risk\n  if (humidity < 50) return '#FFA800'; // Moderate\n  return '#00C2FF'; // Good\n}\n\nfunction getTemperatureColor(temp: number): string {\n  if (temp >= 100) return '#FF4444'; // Extreme heat\n  if (temp >= 90) return '#FF6B00'; // Very hot\n  if (temp >= 80) return '#FFA800'; // Hot\n  if (temp >= 70) return '#00C2FF'; // Warm\n  if (temp >= 50) return '#00FFB3'; // Mild\n  return '#00C2FF'; // Cool\n}\n\nfunction getVisibilityColor(visibilityMiles: number): string {\n  if (visibilityMiles < 1) return '#FF4444'; // Poor\n  if (visibilityMiles < 3) return '#FF6B00'; // Moderate\n  if (visibilityMiles < 6) return '#FFA800'; // Fair\n  return '#00C2FF'; // Good\n}\n\nfunction getVisibilityLabel(visibilityMiles: number): string {\n  if (visibilityMiles < 1) return 'Poor';\n  if (visibilityMiles < 3) return 'Moderate';\n  if (visibilityMiles < 6) return 'Fair';\n  return 'Good';\n}\n\nfunction getAirQualityColor(aqi: number): string {\n  if (aqi >= 201) return '#8B1A1A'; // Very Unhealthy (Purple/Maroon)\n  if (aqi >= 151) return '#FF4444'; // Unhealthy (Red)\n  if (aqi >= 101) return '#FF6B00'; // Unhealthy for Sensitive Groups (Orange)\n  if (aqi >= 51) return '#FFA800'; // Moderate (Yellow)\n  return '#00FFB3'; // Good (Green)\n}\n\nfunction getAirQualityLabel(aqi: number): string {\n  if (aqi >= 201) return 'Very Unhealthy';\n  if (aqi >= 151) return 'Unhealthy';\n  if (aqi >= 101) return 'Unhealthy (Sensitive)';\n  if (aqi >= 51) return 'Moderate';\n  return 'Good';\n}\n\nexport default function OrionDashboard() {\n  const [leftSidebarCollapsed, setLeftSidebarCollapsed] = useState(false)\n  const [rightSidebarCollapsed, setRightSidebarCollapsed] = useState(false)\n  const [aiAssistantCollapsed, setAiAssistantCollapsed] = useState(false)\n  const [environmentalConditionsCollapsed, setEnvironmentalConditionsCollapsed] = useState(false)\n  const [activeIncidentsCollapsed, setActiveIncidentsCollapsed] = useState(false)\n  const [incidentCount, setIncidentCount] = useState(0)\n  const [currentIncidents, setCurrentIncidents] = useState<PoliceIncident[]>([])\n  const [selectedIncident, setSelectedIncident] = useState<PoliceIncident | null>(null)\n  const [alertSending, setAlertSending] = useState(false)\n  const [alertStatus, setAlertStatus] = useState<string | null>(null)\n  const [unitStats, setUnitStats] = useState<{ available: number; dispatched: number; active: number; eta?: string }>({ available: 0, dispatched: 0, active: 0 })\n  const [allUnitStats, setAllUnitStats] = useState<{ available: number; dispatched: number; active: number }>({ available: 0, dispatched: 0, active: 0 })\n  const [dispatchSending, setDispatchSending] = useState(false)\n  const [refreshUnitTrigger, setRefreshUnitTrigger] = useState(0)\n  const [viewMode, setViewMode] = useState<'3d' | '2d'>('3d')\n  const [searchInput, setSearchInput] = useState('')\n\n  // VAPI voice integration\n  const { isSessionActive, isSpeaking, messages: vapiMessages, volumeLevel, start, stop, receiveAgentMessage } = useVapi()\n  \n  // Map center tracking for weather\n  const [mapCenter, setMapCenter] = useState<{ lat: number; lon: number } | null>(null)\n  const { weather, loading: weatherLoading } = useWeather(mapCenter?.lat ?? null, mapCenter?.lon ?? null)\n  \n  // Poll for AI agent messages\n  useEffect(() => {\n    let lastTimestamp: string | null = null;\n    \n    const pollAgentMessages = async () => {\n      try {\n        const url = lastTimestamp \n          ? `/api/vapi-webhook?since=${encodeURIComponent(lastTimestamp)}`\n          : '/api/vapi-webhook';\n        \n        const response = await fetch(url);\n        const data = await response.json();\n        \n        if (data.messages && data.messages.length > 0) {\n          // Process each new message\n          data.messages.forEach((msg: any) => {\n            receiveAgentMessage({\n              action: msg.action,\n              message: msg.message,\n              data: msg.data\n            });\n          });\n          \n          // Update last timestamp\n          lastTimestamp = data.latest_timestamp;\n        }\n      } catch (error) {\n        console.error('Error polling agent messages:', error);\n      }\n    };\n    \n    // Poll every 5 seconds\n    const interval = setInterval(pollAgentMessages, 5000);\n    pollAgentMessages(); // Initial poll\n    \n    return () => clearInterval(interval);\n  }, [receiveAgentMessage])\n  \n  // Map navigation function\n  const [navigateToIncident, setNavigateToIncident] = useState<((incident: any) => void) | null>(null)\n  const [leafletFlyTo, setLeafletFlyTo] = useState<((lat: number, lon: number, zoom?: number) => void) | null>(null)\n  \n  // Map ready callback\n  const handleMapReady = (navFunction: any) => {\n    setNavigateToIncident(() => navFunction);\n  };\n  const handleLeafletReady = (fly: any) => {\n    setLeafletFlyTo(() => fly)\n  }\n\n  // Map movement callback\n  const handleMapMove = (center: { lat: number; lon: number }) => {\n    setMapCenter(center);\n  };\n  \n  const handleVoiceToggle = () => {\n    if (isSessionActive) {\n      stop()\n    } else {\n      start()\n    }\n  }\n\n  const handleIncidentSelect = (incident: any) => {\n    if (!incident) {\n      console.warn('No incident provided to handleIncidentSelect');\n      return;\n    }\n    \n    // Convert to PoliceIncident format with last_update\n    const policeIncident: PoliceIncident = {\n      id: typeof incident.id === 'string' ? incident.id : String(incident.id || ''),\n      name: incident.name || null,\n      priority: incident.priority || incident.risk || null, // Support both priority and risk\n      lat: incident.lat || null,\n      lon: incident.lon || null,\n      containment: incident.containment || null,\n      last_update: incident.last_update || new Date().toISOString(),\n      description: incident.description || null,\n      incident_type: incident.incident_type || null\n    };\n    setSelectedIncident(policeIncident);\n  };\n\n  const handleSearch = () => {\n    if (!searchInput.trim()) return;\n    const coords = searchInput.split(',').map((s) => parseFloat(s.trim()));\n    if (coords.length === 2 && !isNaN(coords[0]) && !isNaN(coords[1])) {\n      leafletFlyTo?.(coords[0], coords[1], 14);\n      navigateToIncident?.({ lat: coords[0], lon: coords[1] });\n      return;\n    }\n    const aliases: Record<string, {lat:number, lon:number}> = {\n      'cmu': { lat: 40.4433, lon: -79.9436 },\n      'forbes': { lat: 40.4427, lon: -79.9425 },\n      'downtown': { lat: 40.4406, lon: -79.9959 },\n    };\n    const key = searchInput.toLowerCase();\n    if (aliases[key]) {\n      const target = aliases[key];\n      leafletFlyTo?.(target.lat, target.lon, 14);\n      navigateToIncident?.({ lat: target.lat, lon: target.lon });\n    }\n  }\n\n  const handleUnitUpdate = useCallback(async (stats: { available: number; dispatched: number; active: number }, activeUnits?: any[]) => {\n    // Store global stats\n    setAllUnitStats(stats);\n    \n    // If we have a selected incident, calculate stats for nearby police stations\n    if (selectedIncident && activeUnits) {\n      try {\n        // Fetch all police stations with their unit stats\n        const response = await fetch('/api/dispatch-unit');\n        const data = await response.json();\n        \n        if (data.stats) {\n          // Calculate distance from incident to each station\n          const calculateDistance = (lat1: number, lon1: number, lat2: number, lon2: number) => {\n            const R = 6371; // Earth's radius in km\n            const dLat = (lat2 - lat1) * Math.PI / 180;\n            const dLon = (lon2 - lon1) * Math.PI / 180;\n            const a = \n              Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n              Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\n              Math.sin(dLon / 2) * Math.sin(dLon / 2);\n            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n            return R * c;\n          };\n          \n          // Get police stations data\n          const stationsResponse = await fetch('/api/incident-state');\n          const stationsData = await stationsResponse.json();\n          const stations = stationsData.stations || [];\n          \n          // Find stations within 100km of this incident\n          const nearbyStations = stations.filter((station: any) => {\n            const distance = calculateDistance(\n              selectedIncident.lat || 0,\n              selectedIncident.lon || 0,\n              station.lat,\n              station.lon\n            );\n            return distance <= 100; // 100km radius\n          });\n          \n          // Calculate available units from nearby stations only\n          const nearbyStationIds = new Set(nearbyStations.map((s: any) => s.id));\n          const availableNearby = data.stats\n            .filter((s: any) => nearbyStationIds.has(s.station_id))\n            .reduce((sum: number, s: any) => sum + (s.available_units || 0), 0);\n          \n          // Filter for THIS incident\n          const incidentId = String(selectedIncident.id);\n          const forThisIncident = activeUnits.filter((u: any) => String(u.incident_id) === incidentId);\n          \n          const dispatched = forThisIncident.filter((u: any) => u.status === 'dispatched' || u.status === 'en_route').length;\n          const active = forThisIncident.filter((u: any) => u.status === 'on_scene').length;\n          \n          // Calculate ETA for dispatched units\n          let eta = undefined;\n          if (dispatched > 0) {\n            // Find nearest station to incident\n            let minDistance = Infinity;\n            for (const station of nearbyStations) {\n              const distance = calculateDistance(\n                selectedIncident.lat || 0,\n                selectedIncident.lon || 0,\n                station.lat,\n                station.lon\n              );\n              if (distance < minDistance) {\n                minDistance = distance;\n              }\n            }\n            // Assume average speed of 60 mph (1 mile per minute)\n            // Convert km to miles and calculate minutes\n            const distanceMiles = minDistance * 0.621371;\n            const estimatedMinutes = Math.ceil(distanceMiles / 1.0); // 60 mph = 1 mile per minute\n            eta = `${estimatedMinutes} min`;\n          }\n          \n          setUnitStats({\n            available: availableNearby, // Available units from nearby stations only\n            dispatched: dispatched, // Units en route to THIS incident\n            active: active, // Units on scene at THIS incident\n            eta: eta\n          });\n        }\n      } catch (error) {\n        console.error('Error fetching incident-specific stats:', error);\n        // Fallback to global stats\n        setUnitStats(stats);\n      }\n    } else {\n      // No incident selected, show global stats\n      setUnitStats(stats);\n    }\n  }, [selectedIncident]);\n\n  // Update unit stats when selected incident changes\n  useEffect(() => {\n    // Trigger a recalculation of stats for the new incident\n    setRefreshUnitTrigger(prev => prev + 1);\n  }, [selectedIncident?.id]);\n\n  const handleIncidentClick = (incident: any) => {\n    // Validate incident object and coordinates before attempting navigation\n    // Note: navigateToIncident will call onIncidentSelect which sets selectedIncident\n    if (incident && \n        incident.lat && incident.lon && \n        !isNaN(incident.lat) && !isNaN(incident.lon) &&\n        incident.lat !== 0 && incident.lon !== 0 &&\n        navigateToIncident) {\n      handleIncidentSelect(incident)\n      navigateToIncident(incident)\n    } else {\n      console.warn('Cannot navigate to incident with invalid data:', {\n        incident: incident ? incident.id : 'null',\n        name: incident?.name,\n        lat: incident?.lat,\n        lon: incident?.lon\n      });\n    }\n  }\n\n  const handleEmergencyAlert = async () => {\n    if (!selectedIncident) {\n      setAlertStatus('Please select an incident first');\n      setTimeout(() => setAlertStatus(null), 3000);\n      return;\n    }\n\n    setAlertSending(true);\n    setAlertStatus(null);\n\n    try {\n      const response = await fetch('/api/send-emergency-alert', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          incident: selectedIncident,\n        }),\n      });\n\n      const result = await response.json();\n\n      if (result.success) {\n        setAlertStatus(`Emergency alert sent successfully! Message ID: ${result.messageSid}`);\n      } else {\n        setAlertStatus(`Failed to send alert: ${result.error}`);\n      }\n    } catch (error) {\n      console.error('Error sending emergency alert:', error);\n      setAlertStatus('Failed to send emergency alert. Please try again.');\n    } finally {\n      setAlertSending(false);\n      // Clear status after 5 seconds\n      setTimeout(() => setAlertStatus(null), 5000);\n    }\n  }\n\n  const handleDispatchUnit = async () => {\n    if (!selectedIncident) {\n      console.warn('[UI] No incident selected');\n      return;\n    }\n\n    if (unitStats.available === 0) {\n      console.warn('[UI] No available units');\n      return;\n    }\n\n    console.log('[UI] Dispatching unit for incident:', selectedIncident.id);\n    setDispatchSending(true);\n\n    try {\n      const response = await fetch('/api/dispatch-unit', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          incidentId: selectedIncident.id,\n          incidentLat: selectedIncident.lat,\n          incidentLon: selectedIncident.lon,\n        }),\n      });\n\n      const result = await response.json();\n      console.log('[UI] Dispatch response:', result);\n\n      if (result.success) {\n        console.log('[UI] âœ… Dispatch successful, refreshing unit data');\n        // Trigger unit refresh\n        setRefreshUnitTrigger(prev => prev + 1);\n      } else {\n        console.error('[UI] âŒ Dispatch failed:', result.error);\n        console.error('[UI] Error details:', result.details);\n        console.error('[UI] Full response:', result);\n      }\n    } catch (error) {\n      console.error('[UI] Error dispatching unit:', error);\n    } finally {\n      setDispatchSending(false);\n    }\n  }\n\n  // Calculate dynamic height based on actual incident count and content\n  const calculateDynamicHeight = () => {\n    if (incidentCount === 0) return 200 // Minimum height when no incidents\n    \n    // Calculate based on actual content - no extra padding at bottom:\n    // - Header section: ~80px (title + padding)\n    // - Each incident item: ~120px (actual content size)\n    // - Space between items: 16px (space-y-4)\n    // - Container padding: 48px (p-6 = 24px top + 24px bottom)\n    \n    const headerHeight = 80\n    const containerPadding = 48\n    const itemHeight = 120 // Actual content size\n    const itemSpacing = 16\n    \n    // Calculate exact height needed - no extra space\n    const totalItemHeight = incidentCount * itemHeight\n    const totalSpacingHeight = Math.max(0, (incidentCount - 1) * itemSpacing)\n    const exactContentHeight = headerHeight + containerPadding + totalItemHeight + totalSpacingHeight\n    \n    // Set reasonable bounds\n    const minHeight = 200\n    const maxHeight = 600\n    \n    return Math.max(minHeight, Math.min(exactContentHeight, maxHeight))\n  }\n\n  return (\n    <div className=\"h-screen w-full flex flex-col overflow-hidden relative\">\n      {/* Full-screen interactive map background */}\n      <div className=\"absolute inset-0 z-0\">\n        <CaliforniaMap \n          className=\"w-full h-full\" \n          onMapReady={handleMapReady}\n          onMapMove={handleMapMove}\n          windSpeed={weather?.wind.speed}\n          windDirection={weather?.wind.deg}\n          onIncidentSelect={handleIncidentSelect}\n          onUnitUpdate={handleUnitUpdate}\n          refreshUnitTrigger={refreshUnitTrigger}\n          selectedIncidentId={selectedIncident?.id || null}\n        />\n      </div>\n\n      {/* Top Navigation - Glass Panel */}\n      <header className=\"relative h-16 glass-panel-interactive rounded-none border-b border-white/10 flex items-center justify-between px-8 shrink-0 z-20 fade-in\">\n        <div className=\"flex items-center gap-8\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 bg-[#3b82f6] rounded-lg flex items-center justify-center\">\n              <Shield className=\"w-5 h-5 text-white\" />\n            </div>\n            <h1 className=\"text-xl font-semibold tracking-tight text-white\">Police Dispatch</h1>\n          </div>\n          <span className=\"text-sm text-white/70 font-medium\">Control Center</span>\n        </div>\n\n        <div className=\"flex items-center gap-8\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-2 h-2 rounded-full bg-[#00C2FF] cyan-glow\" />\n            <span className=\"text-sm text-white/90 font-medium\">Operational</span>\n          </div>\n          <div className=\"flex items-center gap-2 text-white/70\">\n            <Wind className=\"w-4 h-4\" />\n            <span className=\"text-sm font-medium\">\n              {weatherLoading ? (\n                \"Loading...\"\n              ) : weather ? (\n                `${weather.wind.speed} mph ${weather.wind.direction}`\n              ) : (\n                \"15 mph NW\"\n              )}\n            </span>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"relative flex-1 flex gap-6 p-6 overflow-hidden z-10 pointer-events-none\">\n        {/* Left Sidebar - Overview */}\n        <aside className=\"w-[320px] flex flex-col gap-4 pointer-events-auto\">\n          {/* Active Incidents */}\n          <div className=\"glass-panel rounded-xl fade-in\">\n            {activeIncidentsCollapsed ? (\n              /* Collapsed State */\n              <div \n                className=\"p-3 cursor-pointer hover:bg-white/5 transition-all duration-200\"\n                onClick={() => setActiveIncidentsCollapsed(false)}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <h2 className=\"text-sm font-semibold text-white\">Active Incidents</h2>\n                    <Badge className=\"bg-[#FF6B00]/20 text-[#FF6B00] border-0 text-xs font-medium px-2 py-1\">{incidentCount}</Badge>\n                </div>\n                  <ChevronUp className=\"w-4 h-4 text-white/60\" />\n                </div>\n              </div>\n            ) : (\n              /* Expanded State */\n              <div \n                className=\"p-6 flex flex-col overflow-hidden\"\n                style={{ \n                  minHeight: '200px', \n                  maxHeight: '420px',\n                  height: `${Math.min(calculateDynamicHeight(), 420)}px`\n                }}\n              >\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h2 className=\"text-base font-semibold text-white\">Active Incidents</h2>\n                  <div className=\"flex items-center gap-2\">\n                  <Badge className=\"bg-[#FF6B00]/20 text-[#FF6B00] border-0 text-xs font-medium px-2 py-1\">{incidentCount}</Badge>\n                    <Button\n                      onClick={() => setActiveIncidentsCollapsed(true)}\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      className=\"h-6 w-6 p-0 hover:bg-white/10 rounded-md transition-all duration-200\"\n                    >\n                      <Minimize2 className=\"w-3 h-3 text-white/60\" />\n                    </Button>\n                  </div>\n            </div>\n\n                <div className=\"flex-1 overflow-y-auto hide-scrollbar\">\n                  <IncidentsList \n                    onIncidentClick={handleIncidentClick} \n                    onIncidentCountChange={setIncidentCount}\n                    onIncidentsUpdate={setCurrentIncidents}\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Unit Status & Controls - Show when incident is selected */}\n          {selectedIncident && (\n            <div className=\"glass-panel rounded-lg fade-in p-2 space-y-1.5 mt-2\">\n              {/* Compact Header */}\n              <div className=\"flex items-center gap-1.5 mb-1\">\n                <span className=\"text-xs\">ðŸš“</span>\n                <h4 className=\"text-[10px] font-semibold text-white\">Available Units</h4>\n              </div>\n              \n              {/* Compact Unit Stats */}\n              <div className=\"grid grid-cols-3 gap-1 text-center\">\n                <div className=\"bg-white/5 rounded p-1\">\n                  <div className=\"text-base font-bold text-[#00FFB3] leading-none\">{unitStats.available}</div>\n                  <div className=\"text-[9px] text-white/60 mt-0.5\">Available</div>\n                </div>\n                <div className=\"bg-white/5 rounded p-1\">\n                  <div className=\"text-base font-bold text-[#FFA800] leading-none\">{unitStats.dispatched}</div>\n                  <div className=\"text-[9px] text-white/60 mt-0.5\">En Route</div>\n                </div>\n                <div className=\"bg-white/5 rounded p-1\">\n                  <div className=\"text-base font-bold text-[#FF6B00] leading-none\">{unitStats.active}</div>\n                  <div className=\"text-[9px] text-white/60 mt-0.5\">On Scene</div>\n                </div>\n              </div>\n\n              {/* ETA Display - Only show when units are en route */}\n              {unitStats.eta && unitStats.dispatched > 0 && (\n                <div className=\"bg-blue-500/10 border border-blue-400/20 rounded px-2 py-1 text-center\">\n                  <span className=\"text-[9px] text-blue-300/70\">ETA:</span>\n                  <span className=\"text-xs font-bold text-blue-400 ml-1\">{unitStats.eta}</span>\n                </div>\n              )}\n\n              {/* Compact Dispatch Button */}\n              <Button \n                onClick={handleDispatchUnit}\n                disabled={dispatchSending || !selectedIncident || unitStats.available === 0}\n                className={`w-full border-0 h-8 rounded-md text-[10px] font-semibold shadow-lg transition-all duration-200 ${\n                  selectedIncident && !dispatchSending && unitStats.available > 0\n                    ? 'bg-gradient-to-r from-[#3b82f6] to-[#1e40af] hover:from-[#3b82f6]/90 hover:to-[#1e40af]/90 text-white hover:scale-[1.02]'\n                    : 'bg-white/10 text-white/40 cursor-not-allowed'\n                }`}\n              >\n                <Shield className=\"w-3 h-3 mr-1\" />\n                {dispatchSending ? 'Dispatching...' : unitStats.available > 0 ? `Send Unit` : 'No Units'}\n              </Button>\n            </div>\n          )}\n        </aside>\n\n        {/* Center - Transparent area for map interaction */}\n        <main className=\"flex-1 relative pointer-events-none\">\n          {/* This area allows map interaction while being transparent */}\n        </main>\n\n        {/* Right Sidebar - Relative Base Positions with Independent Movement */}\n        <aside className=\"w-[380px] h-[calc(100vh-8rem)] relative pointer-events-auto\">\n          {/* AI Assistant - Base Position Relative to Top */}\n          <div className=\"glass-panel-interactive rounded-xl fade-in absolute top-0 right-0 w-full z-20\">\n            {aiAssistantCollapsed ? (\n              /* Collapsed State */\n              <div className=\"p-3\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <h2 className=\"text-sm font-semibold text-white\">AI Assistant</h2>\n                    {/* Microphone button next to title */}\n                    <Button\n                      onClick={handleVoiceToggle}\n                      size=\"sm\"\n                      className={`transition-all duration-300 ${\n                        isSessionActive\n                          ? 'bg-[#FF6B00] hover:bg-[#FF6B00]/90 fire-glow'\n                          : 'bg-white/10 hover:bg-white/20'\n                      }`}\n                    >\n                      {isSessionActive ? (\n                        <MicOff className=\"w-4 h-4 text-white\" />\n                      ) : (\n                        <Mic className=\"w-4 h-4 text-white\" />\n                      )}\n                    </Button>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-3\">\n                    {/* Status indicator on the right */}\n                    <div className=\"flex items-center gap-2\">\n                      <div className={`w-1.5 h-1.5 rounded-full ${isSessionActive ? 'bg-[#00C2FF] cyan-glow' : 'bg-white/20'}`} />\n                      <span className=\"text-xs text-white/70 font-medium\">{isSessionActive ? 'Live' : 'Offline'}</span>\n                    </div>\n                    \n                    {/* Expand button */}\n                    <Button\n                      onClick={() => setAiAssistantCollapsed(false)}\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      className=\"h-6 w-6 p-0 hover:bg-white/10 rounded-md transition-all duration-200\"\n                    >\n                      <ChevronUp className=\"w-3 h-3 text-white/60\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            ) : (\n              /* Expanded State */\n              <div className=\"p-6 flex flex-col gap-4 h-[350px] overflow-hidden\">\n                <div className=\"flex items-center justify-between\">\n                  <h2 className=\"text-base font-semibold text-white\">AI Voice Assistant</h2>\n                  <div className=\"flex items-center gap-3\">\n                    {/* Voice Control Button */}\n                    <Button\n                      onClick={handleVoiceToggle}\n                      size=\"sm\"\n                      className={`transition-all duration-300 ${\n                        isSessionActive\n                          ? 'bg-[#FF6B00] hover:bg-[#FF6B00]/90 fire-glow'\n                          : 'bg-white/10 hover:bg-white/20'\n                      }`}\n                    >\n                      {isSessionActive ? (\n                        <MicOff className=\"w-4 h-4 text-white\" />\n                      ) : (\n                        <Mic className=\"w-4 h-4 text-white\" />\n                      )}\n                    </Button>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      <div className={`w-2 h-2 rounded-full ${isSessionActive ? 'bg-[#00C2FF] cyan-glow' : 'bg-white/20'}`} />\n                      <span className=\"text-xs text-white/70 font-medium\">{isSessionActive ? 'Live' : 'Offline'}</span>\n                    </div>\n                    \n                    <Button\n                      onClick={() => setAiAssistantCollapsed(true)}\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      className=\"h-6 w-6 p-0 hover:bg-white/10 rounded-md transition-all duration-200\"\n                    >\n                      <Minimize2 className=\"w-3 h-3 text-white/60\" />\n                    </Button>\n                  </div>\n                </div>\n\n                {/* Volume Level Indicator */}\n                {isSessionActive && (\n                  <div className=\"flex items-center gap-3 px-4 py-2 bg-white/5 rounded-lg\">\n                    <Activity className=\"w-4 h-4 text-[#00C2FF]\" />\n                    <div className=\"flex-1 h-2 bg-white/10 rounded-full overflow-hidden\">\n                      <div\n                        className=\"h-full bg-gradient-to-r from-[#00C2FF] to-[#00C2FF]/80 rounded-full transition-all duration-100\"\n                        style={{ width: `${Math.min(volumeLevel * 100, 100)}%` }}\n                      />\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"flex-1 overflow-y-auto space-y-4 pr-2\">\n                  {/* Show VAPI messages if session has been started, otherwise show welcome message */}\n                  {vapiMessages.length > 0 || isSessionActive ? (\n                    <>\n                      {vapiMessages.map((message, index) => (\n                        <div\n                          key={index}\n                          className={`space-y-3 ${\n                            index !== vapiMessages.length - 1 ? 'border-b border-white/10 pb-4' : ''\n                          }`}\n                        >\n                          <div className=\"flex items-center gap-2\">\n                            {message.role === 'assistant' ? (\n                              <Volume2 className=\"w-4 h-4 text-[#00C2FF]\" />\n                            ) : (\n                              <Mic className=\"w-4 h-4 text-white/60\" />\n                            )}\n                            <span className=\"text-xs text-white/60 font-mono\">\n                              {message.timestamp}\n                            </span>\n                          </div>\n                          <p className=\"text-sm text-white/90 leading-relaxed font-medium\">\n                            {message.content}\n                          </p>\n                        </div>\n                      ))}\n                      {isSpeaking && (\n                        <div className=\"space-y-3 animate-pulse\">\n                          <div className=\"flex items-center gap-2\">\n                            <Volume2 className=\"w-4 h-4 text-[#00C2FF]\" />\n                            <span className=\"text-xs text-white/60 font-mono\">Now</span>\n                          </div>\n                          <p className=\"text-sm text-white/50 leading-relaxed font-medium italic\">\n                            Speaking...\n                          </p>\n                        </div>\n                      )}\n                    </>\n                  ) : (\n                    <div className=\"flex-1 flex items-center justify-center\">\n                      <div className=\"text-center space-y-4 max-w-md\">\n                        <div className=\"w-16 h-16 mx-auto rounded-full bg-[#FF6B00] flex items-center justify-center\">\n                          <Bot className=\"w-8 h-8 text-white\" />\n                        </div>\n                        <div>\n                          <p className=\"text-lg font-semibold text-white mb-2\">\n                            Welcome to Police Dispatch\n                          </p>\n                          <p className=\"text-sm text-white/70 mb-4\">\n                            Your AI-powered police dispatch assistant\n                          </p>\n                          <div className=\"text-left space-y-2 text-xs text-white/60\">\n                            <div className=\"flex items-start gap-2\">\n                              <span className=\"text-[#3b82f6] mt-0.5\">â€¢</span>\n                              <span>Real-time incident monitoring and alerts</span>\n                            </div>\n                            <div className=\"flex items-start gap-2\">\n                              <span className=\"text-[#3b82f6] mt-0.5\">â€¢</span>\n                              <span>Live weather and environmental conditions</span>\n                            </div>\n                            <div className=\"flex items-start gap-2\">\n                              <span className=\"text-[#3b82f6] mt-0.5\">â€¢</span>\n                              <span>Voice-activated incident reporting</span>\n                            </div>\n                            <div className=\"flex items-start gap-2\">\n                              <span className=\"text-[#3b82f6] mt-0.5\">â€¢</span>\n                              <span>Unit dispatch and coordination</span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                   )}\n                 </div>\n               </div>\n             )}\n            </div>\n\n          {/* Environmental Conditions - Only show when incident is selected */}\n          {selectedIncident && (\n          <div className=\"glass-panel rounded-xl fade-in absolute top-[30px] right-0 w-full z-10\">\n            {environmentalConditionsCollapsed ? (\n              /* Collapsed State */\n              <div \n                className=\"p-3 cursor-pointer hover:bg-white/5 transition-all duration-200\"\n                onClick={() => setEnvironmentalConditionsCollapsed(false)}\n              >\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-sm font-semibold text-white\">Environmental Conditions</h3>\n                  <ChevronUp className=\"w-4 h-4 text-white/60\" />\n                </div>\n              </div>\n            ) : (\n              /* Expanded State */\n              <div className=\"p-4 flex flex-col overflow-hidden h-[240px]\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-base font-semibold text-white\">Environmental Conditions</h3>\n                  <Button\n                    onClick={() => setEnvironmentalConditionsCollapsed(true)}\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    className=\"h-6 w-6 p-0 hover:bg-white/10 rounded-md transition-all duration-200\"\n                  >\n                    <Minimize2 className=\"w-3 h-3 text-white/60\" />\n                  </Button>\n                </div>\n\n                <div className=\"flex-1 overflow-hidden\">\n                  <div className=\"flex gap-4 h-full\">\n                    {/* Left Half - Weather */}\n                    <div className=\"flex-1 space-y-3\">\n                      <h4 className=\"text-sm font-semibold text-white mb-3\">Weather</h4>\n                      <div className=\"space-y-3\">\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm text-white/70 font-medium\">Humidity</span>\n                          <span className=\"text-base font-bold\" style={{ \n                            color: weather ? getHumidityColor(weather.humidity) : '#00C2FF' \n                          }}>\n                            {weatherLoading ? '...' : weather ? `${weather.humidity}%` : 'N/A'}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm text-white/70 font-medium\">Temperature</span>\n                          <span className=\"text-base font-bold\" style={{ \n                            color: weather ? getTemperatureColor(weather.temp) : '#FF6B00' \n                          }}>\n                            {weatherLoading ? '...' : weather ? `${weather.temp}Â°F` : 'N/A'}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm text-white/70 font-medium\">Visibility</span>\n                          <span className=\"text-base font-bold\" style={{ \n                            color: weather?.visibility ? getVisibilityColor(weather.visibility) : '#00C2FF' \n                          }}>\n                            {weatherLoading ? '...' : weather?.visibility ? getVisibilityLabel(weather.visibility) : 'N/A'}\n                          </span>\n                        </div>\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm text-white/70 font-medium\">Air Quality</span>\n                          <span className=\"text-base font-bold\" style={{ \n                            color: weather?.airQuality?.aqi ? getAirQualityColor(weather.airQuality.aqi) : '#FF4444' \n                          }}>\n                            {weatherLoading ? '...' : weather?.airQuality?.aqi ? getAirQualityLabel(weather.airQuality.aqi) : 'N/A'}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* Right Half - Risk Factors */}\n                    <div className=\"flex-1 space-y-3\">\n                      <h4 className=\"text-sm font-semibold text-white mb-3\">Risk Factors</h4>\n                      <div className=\"space-y-3\">\n                        <div>\n                          <div className=\"flex justify-between text-sm mb-1\">\n                            <span className=\"text-white/70 font-medium\">Fire Danger</span>\n                            <span className=\"font-semibold text-[#FF4444]\">Extreme</span>\n                          </div>\n                          <div className=\"h-1.5 bg-white/10 rounded-full overflow-hidden\">\n                            <div className=\"h-full w-[95%] bg-gradient-to-r from-[#FF4444] to-[#FF4444]/80 rounded-full\" />\n                          </div>\n                        </div>\n                        <div>\n                          <div className=\"flex justify-between text-sm mb-1\">\n                            <span className=\"text-white/70 font-medium\">Fuel Moisture</span>\n                            <span className=\"font-semibold text-[#FF6B00]\">Critical</span>\n                          </div>\n                          <div className=\"h-1.5 bg-white/10 rounded-full overflow-hidden\">\n                            <div className=\"h-full w-[88%] bg-gradient-to-r from-[#FF6B00] to-[#FF6B00]/80 rounded-full\" />\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n          )}\n\n          {/* Emergency Alert - Only show when incident is selected */}\n          {selectedIncident && (\n          <div className=\"absolute bottom-0 right-0 w-full z-30 space-y-2\">\n            {/* Alert Status Message */}\n            {alertStatus && (\n              <div className={`p-3 rounded-lg text-xs font-medium animate-in slide-in-from-bottom-2 ${\n                alertStatus.includes('successfully') \n                  ? 'bg-green-500/20 text-green-400 border border-green-500/30' \n                  : 'bg-red-500/20 text-red-400 border border-red-500/30'\n              }`}>\n                {alertStatus.includes('successfully') ? 'âœ“ ' : 'âœ— '}\n                {alertStatus.replace('Emergency alert sent successfully! Message ID: ', 'Alert sent! SID: ')}\n              </div>\n            )}\n            \n            {/* Emergency Alert Button */}\n            <Button \n              onClick={handleEmergencyAlert}\n              disabled={alertSending || !selectedIncident}\n              className={`w-full border-0 h-12 rounded-xl font-semibold shadow-lg transition-all duration-200 ${\n                selectedIncident && !alertSending\n                  ? 'bg-[#FF6B00] hover:bg-[#FF6B00]/90 text-white hover:scale-[1.02]'\n                  : 'bg-white/10 text-white/40 cursor-not-allowed'\n              }`}\n            >\n              <AlertTriangle className=\"w-5 h-5 mr-2\" />\n              {alertSending ? 'Sending Alert...' : selectedIncident ? `Alert: ${selectedIncident.name}` : 'Select Incident First'}\n            </Button>\n          </div>\n          )}\n        </aside>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}